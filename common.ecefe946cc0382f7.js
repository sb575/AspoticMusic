"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{6090:(T,P,s)=>{s.d(P,{b:()=>r});const r=(0,s(7423).fo)("Geolocation",{web:()=>s.e(4561).then(s.bind(s,4561)).then(t=>new t.GeolocationWeb)})},7693:(T,P,s)=>{s.d(P,{c:()=>e});var f=s(4083),r=s(7864),t=s(1898);const e=(d,a)=>{let o,n;const m=(E,x,p)=>{if(typeof document>"u")return;const C=document.elementFromPoint(E,x);C&&a(C)?C!==o&&(M(),w(C,p)):M()},w=(E,x)=>{o=E,n||(n=o);const p=o;(0,f.w)(()=>p.classList.add("ion-activated")),x()},M=(E=!1)=>{if(!o)return;const x=o;(0,f.w)(()=>x.classList.remove("ion-activated")),E&&n!==o&&o.click(),o=void 0};return(0,t.createGesture)({el:d,gestureName:"buttonActiveDrag",threshold:0,onStart:E=>m(E.currentX,E.currentY,r.a),onMove:E=>m(E.currentX,E.currentY,r.b),onEnd:()=>{M(!0),(0,r.h)(),n=void 0}})}},2225:(T,P,s)=>{s.d(P,{g:()=>f});const f=(a,o,n,m,w)=>t(a[1],o[1],n[1],m[1],w).map(M=>r(a[0],o[0],n[0],m[0],M)),r=(a,o,n,m,w)=>w*(3*o*Math.pow(w-1,2)+w*(-3*n*w+3*n+m*w))-a*Math.pow(w-1,3),t=(a,o,n,m,w)=>d((m-=w)-3*(n-=w)+3*(o-=w)-(a-=w),3*n-6*o+3*a,3*o-3*a,a).filter(E=>E>=0&&E<=1),d=(a,o,n,m)=>{if(0===a)return((a,o,n)=>{const m=o*o-4*a*n;return m<0?[]:[(-o+Math.sqrt(m))/(2*a),(-o-Math.sqrt(m))/(2*a)]})(o,n,m);const w=(3*(n/=a)-(o/=a)*o)/3,M=(2*o*o*o-9*o*n+27*(m/=a))/27;if(0===w)return[Math.pow(-M,1/3)];if(0===M)return[Math.sqrt(-w),-Math.sqrt(-w)];const E=Math.pow(M/2,2)+Math.pow(w/3,3);if(0===E)return[Math.pow(M/2,.5)-o/3];if(E>0)return[Math.pow(-M/2+Math.sqrt(E),1/3)-Math.pow(M/2+Math.sqrt(E),1/3)-o/3];const x=Math.sqrt(Math.pow(-w/3,3)),p=Math.acos(-M/(2*Math.sqrt(Math.pow(-w/3,3)))),C=2*Math.pow(x,1/3);return[C*Math.cos(p/3)-o/3,C*Math.cos((p+2*Math.PI)/3)-o/3,C*Math.cos((p+4*Math.PI)/3)-o/3]}},5062:(T,P,s)=>{s.d(P,{i:()=>f});const f=r=>r&&""!==r.dir?"rtl"===r.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},6602:(T,P,s)=>{s.r(P),s.d(P,{startFocusVisible:()=>e});const f="ion-focused",t=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],e=d=>{let a=[],o=!0;const n=d?d.shadowRoot:document,m=d||document.body,w=u=>{a.forEach(c=>c.classList.remove(f)),u.forEach(c=>c.classList.add(f)),a=u},M=()=>{o=!1,w([])},E=u=>{o=t.includes(u.key),o||w([])},x=u=>{if(o&&void 0!==u.composedPath){const c=u.composedPath().filter(l=>!!l.classList&&l.classList.contains("ion-focusable"));w(c)}},p=()=>{n.activeElement===m&&w([])};return n.addEventListener("keydown",E),n.addEventListener("focusin",x),n.addEventListener("focusout",p),n.addEventListener("touchstart",M),n.addEventListener("mousedown",M),{destroy:()=>{n.removeEventListener("keydown",E),n.removeEventListener("focusin",x),n.removeEventListener("focusout",p),n.removeEventListener("touchstart",M),n.removeEventListener("mousedown",M)},setFocus:w}}},6555:(T,P,s)=>{s.d(P,{c:()=>r});var f=s(6655);const r=a=>{const o=a;let n;return{hasLegacyControl:()=>{if(void 0===n){const w=void 0!==o.label||t(o),M=o.hasAttribute("aria-label")||o.hasAttribute("aria-labelledby")&&null===o.shadowRoot,E=(0,f.h)(o);n=!0===o.legacy||!w&&!M&&null!==E}return n}}},t=a=>null!==a.shadowRoot&&!!(e.includes(a.tagName)&&null!==a.querySelector('[slot="label"]')||d.includes(a.tagName)&&""!==a.textContent),e=["ION-RANGE"],d=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"]},7864:(T,P,s)=>{s.d(P,{a:()=>e,b:()=>d,c:()=>t,d:()=>o,h:()=>a});const f={getEngine(){var n;const m=window;return m.TapticEngine||(null===(n=m.Capacitor)||void 0===n?void 0:n.isPluginAvailable("Haptics"))&&m.Capacitor.Plugins.Haptics},available(){var n;const m=window;return!!this.getEngine()&&("web"!==(null===(n=m.Capacitor)||void 0===n?void 0:n.getPlatform())||typeof navigator<"u"&&void 0!==navigator.vibrate)},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(n){const m=this.getEngine();if(!m)return;const w=this.isCapacitor()?n.style.toUpperCase():n.style;m.impact({style:w})},notification(n){const m=this.getEngine();if(!m)return;const w=this.isCapacitor()?n.style.toUpperCase():n.style;m.notification({style:w})},selection(){this.impact({style:"light"})},selectionStart(){const n=this.getEngine();n&&(this.isCapacitor()?n.selectionStart():n.gestureSelectionStart())},selectionChanged(){const n=this.getEngine();n&&(this.isCapacitor()?n.selectionChanged():n.gestureSelectionChanged())},selectionEnd(){const n=this.getEngine();n&&(this.isCapacitor()?n.selectionEnd():n.gestureSelectionEnd())}},r=()=>f.available(),t=()=>{r()&&f.selection()},e=()=>{r()&&f.selectionStart()},d=()=>{r()&&f.selectionChanged()},a=()=>{r()&&f.selectionEnd()},o=n=>{r()&&f.impact(n)}},7366:(T,P,s)=>{s.d(P,{a:()=>f,b:()=>x,c:()=>o,d:()=>p,e:()=>v,f:()=>a,g:()=>C,h:()=>t,i:()=>r,j:()=>g,k:()=>_,l:()=>n,m:()=>M,n:()=>u,o:()=>w,p:()=>d,q:()=>e,r:()=>i,s:()=>h,t:()=>E,u:()=>c,v:()=>l,w:()=>m});const f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M368 64L144 256l224 192V64z'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 144l192 224 192-224H64z'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 368L256 144 64 368h384z'/></svg>",a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M416 128L192 384l-96-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M136 208l120-104 120 104M136 304l120 104 120-104' stroke-width='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",M="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",E="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",x="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",C="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='192' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",g="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"},4862:(T,P,s)=>{s.d(P,{I:()=>a,a:()=>w,b:()=>d,c:()=>x,d:()=>C,f:()=>M,g:()=>m,i:()=>n,p:()=>p,r:()=>u,s:()=>E});var f=s(5861),r=s(6655),t=s(1178);const d="ion-content",a=".ion-content-scroll-host",o=`${d}, ${a}`,n=c=>"ION-CONTENT"===c.tagName,m=function(){var c=(0,f.Z)(function*(l){return n(l)?(yield new Promise(i=>(0,r.c)(l,i)),l.getScrollElement()):l});return function(i){return c.apply(this,arguments)}}(),w=c=>c.querySelector(a)||c.querySelector(o),M=c=>c.closest(o),E=(c,l)=>n(c)?c.scrollToTop(l):Promise.resolve(c.scrollTo({top:0,left:0,behavior:l>0?"smooth":"auto"})),x=(c,l,i,g)=>n(c)?c.scrollByPoint(l,i,g):Promise.resolve(c.scrollBy({top:i,left:l,behavior:g>0?"smooth":"auto"})),p=c=>(0,t.b)(c,d),C=c=>{if(n(c)){const i=c.scrollY;return c.scrollY=!1,i}return c.style.setProperty("overflow","hidden"),!0},u=(c,l)=>{n(c)?c.scrollY=l:c.style.removeProperty("overflow")}},9240:(T,P,s)=>{s.d(P,{g:()=>r});var f=s(1178);const r=(e,d,a)=>{const o=null==e?0:e.toString().length,n=t(o,d);if(void 0===a)return n;try{return a(o,d)}catch(m){return(0,f.a)("Exception in provided `counterFormatter`.",m),n}},t=(e,d)=>`${e} / ${d}`},5234:(T,P,s)=>{s.r(P),s.d(P,{KEYBOARD_DID_CLOSE:()=>r,KEYBOARD_DID_OPEN:()=>f,copyVisualViewport:()=>l,keyboardDidClose:()=>p,keyboardDidOpen:()=>E,keyboardDidResize:()=>x,resetKeyboardAssist:()=>o,setKeyboardClose:()=>M,setKeyboardOpen:()=>w,startKeyboardAssist:()=>n,trackViewportChanges:()=>c});const f="ionKeyboardDidShow",r="ionKeyboardDidHide";let e={},d={},a=!1;const o=()=>{e={},d={},a=!1},n=i=>{m(i),i.visualViewport&&(d=l(i.visualViewport),i.visualViewport.onresize=()=>{c(i),E()||x(i)?w(i):p(i)&&M(i)})},m=i=>{i.addEventListener("keyboardDidShow",g=>w(i,g)),i.addEventListener("keyboardDidHide",()=>M(i))},w=(i,g)=>{C(i,g),a=!0},M=i=>{u(i),a=!1},E=()=>!a&&e.width===d.width&&(e.height-d.height)*d.scale>150,x=i=>a&&!p(i),p=i=>a&&d.height===i.innerHeight,C=(i,g)=>{const h=new CustomEvent(f,{detail:{keyboardHeight:g?g.keyboardHeight:i.innerHeight-d.height}});i.dispatchEvent(h)},u=i=>{const g=new CustomEvent(r);i.dispatchEvent(g)},c=i=>{e=Object.assign({},d),d=l(i.visualViewport)},l=i=>({width:Math.round(i.width),height:Math.round(i.height),offsetTop:i.offsetTop,offsetLeft:i.offsetLeft,pageTop:i.pageTop,pageLeft:i.pageLeft,scale:i.scale})},8034:(T,P,s)=>{s.d(P,{K:()=>t,a:()=>e,c:()=>o});var f=s(5861),r=s(4110),t=(()=>{return(n=t||(t={})).Body="body",n.Ionic="ionic",n.Native="native",n.None="none",t;var n})();const e={getEngine(){var n;return(null===(n=null==r.w?void 0:r.w.Capacitor)||void 0===n?void 0:n.isPluginAvailable("Keyboard"))&&(null==r.w?void 0:r.w.Capacitor.Plugins.Keyboard)},getResizeMode(){const n=this.getEngine();return null!=n&&n.getResizeMode?n.getResizeMode().catch(m=>{if("UNIMPLEMENTED"!==m.code)throw m}):Promise.resolve(void 0)}},d=n=>{if(void 0===r.d||n===t.None||void 0===n)return null;const m=r.d.querySelector("ion-app");return null!=m?m:r.d.body},a=n=>{const m=d(n);return null===m?0:m.clientHeight},o=function(){var n=(0,f.Z)(function*(m){let w,M,E,x;const p=function(){var i=(0,f.Z)(function*(){const g=yield e.getResizeMode(),_=void 0===g?void 0:g.mode;w=()=>{void 0===x&&(x=a(_)),E=!0,C(E,_)},M=()=>{E=!1,C(E,_)},null==r.w||r.w.addEventListener("keyboardWillShow",w),null==r.w||r.w.addEventListener("keyboardWillHide",M)});return function(){return i.apply(this,arguments)}}(),C=(i,g)=>{m&&m(i,u(g))},u=i=>{if(0===x||x===a(i))return;const g=d(i);return null!==g?new Promise(_=>{const v=new ResizeObserver(()=>{g.clientHeight===x&&(v.disconnect(),_())});v.observe(g)}):void 0};return yield p(),{init:p,destroy:()=>{null==r.w||r.w.removeEventListener("keyboardWillShow",w),null==r.w||r.w.removeEventListener("keyboardWillHide",M),w=M=void 0},isKeyboardVisible:()=>E}});return function(w){return n.apply(this,arguments)}}()},6690:(T,P,s)=>{s.d(P,{S:()=>r});const r={bubbles:{dur:1e3,circles:9,fn:(t,e,d)=>{const a=t*e/d-t+"ms",o=2*Math.PI*e/d;return{r:5,style:{top:32*Math.sin(o)+"%",left:32*Math.cos(o)+"%","animation-delay":a}}}},circles:{dur:1e3,circles:8,fn:(t,e,d)=>{const a=e/d,o=t*a-t+"ms",n=2*Math.PI*a;return{r:5,style:{top:32*Math.sin(n)+"%",left:32*Math.cos(n)+"%","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:32-32*e+"%","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:8,fn:(t,e,d)=>({y1:14,y2:26,style:{transform:`rotate(${360/d*e+(e<d/2?180:-180)}deg)`,"animation-delay":t*e/d-t+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(t,e,d)=>({y1:12,y2:20,style:{transform:`rotate(${360/d*e+(e<d/2?180:-180)}deg)`,"animation-delay":t*e/d-t+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(t,e,d)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/d-t+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(t,e,d)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/d-t+"ms"}})}}},4805:(T,P,s)=>{s.r(P),s.d(P,{createSwipeBackGesture:()=>d});var f=s(6655),r=s(5062),t=s(1898);s(4349);const d=(a,o,n,m,w)=>{const M=a.ownerDocument.defaultView;let E=(0,r.i)(a);const p=i=>E?-i.deltaX:i.deltaX;return(0,t.createGesture)({el:a,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:i=>(E=(0,r.i)(a),(i=>{const{startX:_}=i;return E?_>=M.innerWidth-50:_<=50})(i)&&o()),onStart:n,onMove:i=>{const _=p(i)/M.innerWidth;m(_)},onEnd:i=>{const g=p(i),_=M.innerWidth,h=g/_,v=(i=>E?-i.velocityX:i.velocityX)(i),y=v>=0&&(v>.2||g>_/2),b=(y?1-h:h)*_;let I=0;if(b>5){const D=b/Math.abs(v);I=Math.min(D,540)}w(y,h<=0?.01:(0,f.l)(0,h,.9999),I)}})}},9448:(T,P,s)=>{s.d(P,{i:()=>C});var f=s(5861),r=s(433),t=s(4814),e=s(5439),a=s(6388),o=s(4650),n=s(650),m=s(1468),w=s(7151),M=s(1481),E=s(6895);function x(u,c){if(1&u&&o._UZ(0,"img",18),2&u){const l=o.oxw();o.Q6J("src",l.trackForm.value.imageUrl,o.LSH)}}function p(u,c){1&u&&o._UZ(0,"img",19)}let C=(()=>{class u{constructor(l,i,g,_,h,v,O,y){this.platform=l,this.navParams=i,this.aspoticServ=g,this.authService=_,this.modalController=h,this.formBuilder=v,this.sanitizer=O,this.toastController=y,(0,t.q)(window)}ngOnInit(){this.trackForm=this.formBuilder.group({name:["",r.kI.required],artist:["",r.kI.required],album:["",r.kI.required],imageUrl:["",r.kI.required]}),this.getTrackData()}selectFromCamera(){a.V1.getPhoto({quality:100,allowEditing:!1,resultType:a.dk.Base64,source:a.oK.Camera}).then(l=>{const i=new Image;i.src="data:image/jpeg;base64,"+l.base64String,i.onload=()=>{const g=document.createElement("canvas"),_=g.getContext("2d");g.width=640,g.height=640,null==_||_.drawImage(i,0,0,640,640),this.imageUrl=g.toDataURL("image/jpeg"),this.trackForm.patchValue({imageUrl:this.imageUrl})}},l=>{console.error("Error selecting image from camera",l)})}getTrackData(){this.aspoticServ.getTrackById(this.trackId).subscribe(l=>{this.trackForm.patchValue({name:l.name,artist:l.album.artists[0].name,album:l.album.name,imageUrl:l.album.images[0].url})},l=>{console.error("Error getting track data",l)})}showError(l){var i=this;return(0,f.Z)(function*(){(yield i.toastController.create({message:l,duration:3e3,color:"danger",mode:"ios",position:"bottom"})).present()})()}showSuccessMessage(l){var i=this;return(0,f.Z)(function*(){(yield i.toastController.create({message:l,duration:3e3,color:"success",mode:"ios",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(){if(this.trackForm.invalid)return;const l=this.trackId=this.navParams.get("trackId"),g=e(new Date).format("YYYY-MM-DD").toString(),_=this.authService.getUserIdFromToken();this.aspoticServ.editTrack(l,{_id:this.trackId,name:this.trackForm.value.name,album:{artists:[{id:"",name:this.trackForm.value.artist}],images:[{height:0,url:this.trackForm.value.imageUrl,width:0}],id:"",name:this.trackForm.value.name,release_date:g,release_date_precision:"",total_tracks:0},duration_ms:0,comments:[],userId:_,id:"",preview_url:""}).subscribe(v=>{console.log("Track updated successfully",v),this.showSuccessMessage("Track updated successfully"),this.dismiss(),this.platform.ready().then(()=>{location.reload()})},v=>{console.error("Error updating track",v),this.showError("Error updating track"),this.dismiss()})}}return u.\u0275fac=function(l){return new(l||u)(o.Y36(n.t4),o.Y36(n.X1),o.Y36(m.z),o.Y36(w.e),o.Y36(n.IN),o.Y36(r.qu),o.Y36(M.H7),o.Y36(n.yF))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-edit-track"]],decls:45,vars:5,consts:[[3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup","ngSubmit"],["size","12",1,"ion-text-center"],["class","image-preview",3,"src",4,"ngIf"],["src","https://lasallealfaro.es/wp-content/uploads/2021/01/placeholder-1.png","class","image-preview-placeholder",4,"ngIf"],["id","item","fill","outline"],["position","floating"],["formControlName","name"],["position","stacked"],["formControlName","artist"],["formControlName","album"],["formControlName","imageUrl"],[1,"div-buttons"],["expand","block",1,"custom-btn",3,"click"],["type","submit","expand","block",1,"custom-btn",3,"disabled"],[1,"image-preview",3,"src"],["src","https://lasallealfaro.es/wp-content/uploads/2021/01/placeholder-1.png",1,"image-preview-placeholder"]],template:function(l,i){1&l&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"Edit track"),o.qZA(),o.TgZ(4,"ion-buttons",1)(5,"ion-button",2),o.NdJ("click",function(){return i.dismiss()}),o._UZ(6,"ion-icon",3),o.qZA()()()(),o.TgZ(7,"ion-content")(8,"form",4),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",5),o.YNc(12,x,1,1,"img",6),o.YNc(13,p,1,0,"img",7),o.qZA()(),o.TgZ(14,"ion-row")(15,"ion-col",5)(16,"ion-item",8)(17,"ion-label",9),o._uU(18,"Track name"),o.qZA(),o._UZ(19,"ion-input",10),o.qZA()()(),o.TgZ(20,"ion-row")(21,"ion-col",5)(22,"ion-item",8)(23,"ion-label",11),o._uU(24,"Artist name"),o.qZA(),o._UZ(25,"ion-input",12),o.qZA()()(),o.TgZ(26,"ion-row")(27,"ion-col",5)(28,"ion-item",8)(29,"ion-label",11),o._uU(30,"Album name"),o.qZA(),o._UZ(31,"ion-input",13),o.qZA()()(),o.TgZ(32,"ion-row")(33,"ion-col",5)(34,"ion-item",8)(35,"ion-label",9),o._uU(36,"Track image"),o.qZA(),o._UZ(37,"ion-input",14),o.qZA()()(),o.TgZ(38,"ion-row")(39,"ion-col",5)(40,"div",15)(41,"ion-button",16),o.NdJ("click",function(){return i.selectFromCamera()}),o._uU(42,"Take photo"),o.qZA(),o.TgZ(43,"ion-button",17),o._uU(44,"Save changes"),o.qZA()()()()()()()),2&l&&(o.Q6J("translucent",!0),o.xp6(8),o.Q6J("formGroup",i.trackForm),o.xp6(4),o.Q6J("ngIf",i.trackForm.value.imageUrl),o.xp6(1),o.Q6J("ngIf",!i.trackForm.value.imageUrl),o.xp6(30),o.Q6J("disabled",i.trackForm.invalid))},dependencies:[E.O5,r._Y,r.JJ,r.JL,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.Nd,n.wd,n.sr,n.j9,r.sg,r.u],styles:["#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}.div-buttons[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:10px;margin-left:10px}.image-preview[_ngcontent-%COMP%], .image-preview-placeholder[_ngcontent-%COMP%]{height:200px;text-align:center;border:1px dashed #000;border-radius:15px}.custom-btn[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;text-transform:capitalize;margin-top:15px;margin-bottom:15px}"]}),u})()},4762:(T,P,s)=>{s.d(P,{Z:()=>a});var f=s(4650),r=s(1468),t=s(7151),e=s(1194),d=s(650);let a=(()=>{class o{constructor(m,w,M){this.aspoticServ=m,this.authService=w,this.router=M}onSignOutClick(){const m=this.authService.getUserIdFromToken();this.authService.signOut(m).subscribe(()=>{localStorage.removeItem("token"),this.router.navigate(["/home"])})}}return o.\u0275fac=function(m){return new(m||o)(f.Y36(r.z),f.Y36(t.e),f.Y36(e.F0))},o.\u0275cmp=f.Xpm({type:o,selectors:[["app-explore-container"]],decls:6,vars:0,consts:[[1,"ion-no-border"],[1,"custom-title"],["slot","end",1,"custom-btn","add-margin-right",3,"click"]],template:function(m,w){1&m&&(f.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),f._uU(3,"ASPOTIC"),f.qZA(),f.TgZ(4,"ion-button",2),f.NdJ("click",function(){return w.onSignOutClick()}),f._uU(5," SignOut "),f.qZA()()())},dependencies:[d.YG,d.Gu,d.wd,d.sr],styles:[".custom-title[_ngcontent-%COMP%]{color:#858bff}.cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center;margin-bottom:20px}ion-card[_ngcontent-%COMP%]{width:150px;height:140px;margin:50px;position:relative}ion-card[_ngcontent-%COMP%]:hover   .overlayer[_ngcontent-%COMP%]{visibility:visible}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:center;justify-content:center;margin-top:180px}ion-card-title[_ngcontent-%COMP%]{font-size:medium;color:#fff;text-align:center;justify-content:center}ion-card-subtitle[_ngcontent-%COMP%]{font-size:small;color:#ccc;text-align:center;justify-content:center}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{top:-175px;color:#fff;position:relative;font-size:13px;text-decoration:none}ion-fab[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px}ion-fab-button[_ngcontent-%COMP%]{font-size:16px}ion-icon[_ngcontent-%COMP%]{text-align:center}.center-btn[_ngcontent-%COMP%]{margin-right:15px}img[_ngcontent-%COMP%]{border-radius:5%}ion-icon[_ngcontent-%COMP%]{color:#fff}.custom-btn[_ngcontent-%COMP%], .custom-btn-add[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;text-transform:capitalize;margin-top:15px;margin-bottom:15px}.add-margin-right[_ngcontent-%COMP%]{margin-right:15px}@media only screen and (max-width: 600px){.search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.custom-btn[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}}@media only screen and (min-width: 601px){.search-container[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.custom-btn[_ngcontent-%COMP%]{margin-right:15px}}"]}),o})()},581:(T,P,s)=>{s.d(P,{e:()=>d});var f=s(6895),r=s(433),t=s(650),e=s(4650);let d=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[f.ez,r.u5,t.Pc]}),a})()},8449:(T,P,s)=>{s.d(P,{X:()=>x});var f=s(5861),r=s(433),t=s(4650),e=s(7151),d=s(1194),a=s(650),o=s(6895);function n(p,C){if(1&p&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&p){const u=t.oxw().$implicit;t.xp6(1),t.hij(" ",u.message," ")}}function m(p,C){if(1&p&&(t.ynx(0),t.YNc(1,n,2,1,"div",14),t.BQk()),2&p){const u=C.$implicit,c=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",(null==c.formValidation||null==(l=c.formValidation.get("username"))?null:l.hasError(u.type))&&((null==(l=c.formValidation.get("username"))?null:l.dirty)||(null==(l=c.formValidation.get("username"))?null:l.touched)))}}function w(p,C){if(1&p&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&p){const u=t.oxw().$implicit;t.xp6(1),t.hij(" ",u.message," ")}}function M(p,C){if(1&p&&(t.ynx(0),t.YNc(1,w,2,1,"div",14),t.BQk()),2&p){const u=C.$implicit,c=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",(null==(l=c.formValidation.get("password"))?null:l.hasError(u.type))&&((null==(l=c.formValidation.get("password"))?null:l.dirty)||(null==(l=c.formValidation.get("password"))?null:l.touched)))}}function E(p,C){if(1&p){const u=t.EpF();t.TgZ(0,"ion-content")(1,"div",5)(2,"form",6),t.NdJ("ngSubmit",function(){t.CHM(u);const l=t.oxw();return t.KtG(l.tryLogin(l.formValidation.value))}),t.TgZ(3,"ion-item",7)(4,"ion-label",8),t._uU(5,"Email"),t.qZA(),t._UZ(6,"ion-input",9),t.qZA(),t.TgZ(7,"div"),t.YNc(8,m,2,1,"ng-container",10),t.qZA(),t.TgZ(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Password"),t.qZA(),t._UZ(12,"ion-input",11),t.qZA(),t.TgZ(13,"div"),t.YNc(14,M,2,1,"ng-container",10),t.qZA(),t.TgZ(15,"div",12)(16,"ion-button",13),t._uU(17,"Sign In"),t.qZA()()()()()}if(2&p){const u=t.oxw();t.xp6(2),t.Q6J("formGroup",u.formValidation),t.xp6(6),t.Q6J("ngForOf",u.formValidationMessages.username),t.xp6(6),t.Q6J("ngForOf",u.formValidationMessages.password),t.xp6(2),t.Q6J("disabled",!u.formValidation.valid)}}let x=(()=>{class p{constructor(u,c,l,i,g){this.authService=u,this.router=c,this.formBuilder=l,this.modalController=i,this.toastController=g,this.formValidationMessages={username:[{type:"required",message:"Email is a required field."},{type:"pattern",message:"The email format is not correct."}],password:[{type:"required",message:"Password is a required field."},{type:"minlength",message:"The minimum length of a password is 6 characters."}]},this.formValidation=this.formBuilder.group({username:["",r.kI.compose([r.kI.required,r.kI.email])],password:["",r.kI.compose([r.kI.required,r.kI.minLength(6)])]})}ngOnInit(){this.formValidation=this.formBuilder.group({username:new r.NI("",r.kI.compose([r.kI.required,r.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new r.NI("",r.kI.compose([r.kI.minLength(6),r.kI.required]))})}dismiss(){this.modalController.dismiss()}showError(u){var c=this;return(0,f.Z)(function*(){(yield c.toastController.create({message:u,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(u){var c=this;return(0,f.Z)(function*(){(yield c.toastController.create({message:u,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}tryLogin(u){this.authService.login(u).subscribe(c=>{console.log("Successful login")},c=>{console.error("Failed to sign in",c)}),this.authService.doLogin(u).then(c=>{this.showSuccessMessage("Successful login"),this.dismiss(),this.router.navigate(["/tabs"])},c=>{"auth/user-not-found"==c.code&&this.showError("There is no user record that corresponds to the email entered"),"auth/wrong-password"==c.code&&this.showError("The password entered is not correct"),console.log(c)})}}return p.\u0275fac=function(u){return new(u||p)(t.Y36(e.e),t.Y36(d.F0),t.Y36(r.qu),t.Y36(a.IN),t.Y36(a.yF))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[4,"ngIf"],["id","container"],[1,"form",3,"formGroup","ngSubmit"],["id","item","fill","outline"],["position","floating"],["id","email-input","type","text","formControlName","username"],[4,"ngFor","ngForOf"],["id","password-input","type","password","formControlName","password"],[1,"div-button-login"],["type","submit","id","signIn-btn",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(u,c){1&u&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sing In"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return c.dismiss()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.YNc(7,E,18,4,"ion-content",4)),2&u&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",c.formValidation))},dependencies:[o.sg,o.O5,r._Y,r.JJ,r.JL,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.wd,a.sr,a.j9,r.sg,r.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px;width:100%;padding:20px}.label-title[_ngcontent-%COMP%]{font-size:x-large;font-weight:500;color:#000;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:20px}ion-button[_ngcontent-%COMP%]{width:100%;margin:10px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:small;margin-bottom:10px;margin-right:10px;margin-left:10px}.error-alert[_ngcontent-%COMP%]{color:#f08383;background-color:#f08383;border-radius:20px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}"]}),p})()},8391:(T,P,s)=>{s.d(P,{V:()=>x});var f=s(5861),r=s(433),t=s(4650),e=s(7151),d=s(1194),a=s(650),o=s(6895);function n(p,C){if(1&p&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&p){const u=t.oxw().$implicit;t.xp6(1),t.hij(" ",u.message," ")}}function m(p,C){if(1&p&&(t.ynx(0),t.YNc(1,n,2,1,"div",14),t.BQk()),2&p){const u=C.$implicit,c=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",(null==c.formValidation||null==(l=c.formValidation.get("username"))?null:l.hasError(u.type))&&((null==(l=c.formValidation.get("username"))?null:l.dirty)||(null==(l=c.formValidation.get("username"))?null:l.touched)))}}function w(p,C){if(1&p&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&p){const u=t.oxw().$implicit;t.xp6(1),t.hij(" ",u.message," ")}}function M(p,C){if(1&p&&(t.ynx(0),t.YNc(1,w,2,1,"div",14),t.BQk()),2&p){const u=C.$implicit,c=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",(null==(l=c.formValidation.get("password"))?null:l.hasError(u.type))&&((null==(l=c.formValidation.get("password"))?null:l.dirty)||(null==(l=c.formValidation.get("password"))?null:l.touched)))}}function E(p,C){if(1&p){const u=t.EpF();t.TgZ(0,"ion-content")(1,"div",5)(2,"form",6),t.NdJ("ngSubmit",function(){t.CHM(u);const l=t.oxw();return t.KtG(l.trySignUp(l.formValidation.value))}),t.TgZ(3,"ion-item",7)(4,"ion-label",8),t._uU(5,"Email"),t.qZA(),t._UZ(6,"ion-input",9),t.qZA(),t.TgZ(7,"div"),t.YNc(8,m,2,1,"ng-container",10),t.qZA(),t.TgZ(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Password"),t.qZA(),t._UZ(12,"ion-input",11),t.qZA(),t.TgZ(13,"div"),t.YNc(14,M,2,1,"ng-container",10),t.qZA(),t.TgZ(15,"div",12)(16,"ion-button",13),t._uU(17,"Sign Up"),t.qZA()()()()()}if(2&p){const u=t.oxw();t.xp6(2),t.Q6J("formGroup",u.formValidation),t.xp6(6),t.Q6J("ngForOf",u.formValidationMessages.username),t.xp6(6),t.Q6J("ngForOf",u.formValidationMessages.password),t.xp6(2),t.Q6J("disabled",!u.formValidation.valid)}}let x=(()=>{class p{constructor(u,c,l,i,g){this.authService=u,this.formBuilder=c,this.router=l,this.toastController=i,this.modalController=g,this.errorMessage="",this.formValidationMessages={username:[{type:"required",message:"Email is a required field."},{type:"pattern",message:"The email format is not correct."}],password:[{type:"required",message:"Password is a required field."},{type:"minlength",message:"The minimum length of a password is 6 characters."}]}}ngOnInit(){this.formValidation=this.formBuilder.group({username:new r.NI("",r.kI.compose([r.kI.required,r.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new r.NI("",r.kI.compose([r.kI.minLength(6),r.kI.required]))})}showError(u){var c=this;return(0,f.Z)(function*(){(yield c.toastController.create({message:u,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(u){var c=this;return(0,f.Z)(function*(){(yield c.toastController.create({message:u,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}trySignUp(u){this.authService.signup(u).subscribe(c=>{console.log("Successful sign up")},c=>{console.error("Failed to sign up",c)}),this.authService.createUser(u).then(c=>{console.log("Successful sign up"),this.showSuccessMessage("Successful sign up, now you can sing in"),this.dismiss(),this.router.navigate(["/home"])},c=>{"auth/email-already-in-use"==c.code&&this.showError("User already exists"),"auth/invalid-email"==c.code&&this.showError("The email format is incorrect"),console.log(c)})}}return p.\u0275fac=function(u){return new(u||p)(t.Y36(e.e),t.Y36(r.qu),t.Y36(d.F0),t.Y36(a.yF),t.Y36(a.IN))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-signup"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[4,"ngIf"],["id","container"],[1,"form",3,"formGroup","ngSubmit"],["id","item","fill","outline"],["position","floating"],["type","text","formControlName","username"],[4,"ngFor","ngForOf"],["type","password","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(u,c){1&u&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sign Up"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return c.dismiss()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.YNc(7,E,18,4,"ion-content",4)),2&u&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",c.formValidation))},dependencies:[o.sg,o.O5,r._Y,r.JJ,r.JL,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.wd,a.sr,a.j9,r.sg,r.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px;width:100%;padding:20px}.label-title[_ngcontent-%COMP%]{font-size:x-large;font-weight:500;color:#000;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:20px}ion-button[_ngcontent-%COMP%]{width:100%;margin:10px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:small;margin-bottom:10px;margin-right:10px;margin-left:10px}.error-alert[_ngcontent-%COMP%]{color:#f08383;background-color:#f08383;border-radius:20px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}"]}),p})()},4133:(T,P,s)=>{s.d(P,{R:()=>l});var f=s(5861),r=s(433),t=s(6090),e=s(4650),d=s(650),a=s(1468),o=s(7151),n=s(6895);function m(i,g){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&i){const _=e.oxw().$implicit;e.xp6(1),e.hij(" ",_.message," ")}}function w(i,g){if(1&i&&(e.ynx(0),e.YNc(1,m,2,1,"div",17),e.BQk()),2&i){const _=g.$implicit,h=e.oxw(2);let v;e.xp6(1),e.Q6J("ngIf",(null==h.formValidation||null==(v=h.formValidation.get("author"))?null:v.hasError(_.type))&&((null==(v=h.formValidation.get("author"))?null:v.dirty)||(null==(v=h.formValidation.get("author"))?null:v.touched)))}}function M(i,g){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&i){const _=e.oxw().$implicit;e.xp6(1),e.hij(" ",_.message," ")}}function E(i,g){if(1&i&&(e.ynx(0),e.YNc(1,M,2,1,"div",17),e.BQk()),2&i){const _=g.$implicit,h=e.oxw(2);let v;e.xp6(1),e.Q6J("ngIf",(null==h.formValidation||null==(v=h.formValidation.get("comment"))?null:v.hasError(_.type))&&((null==(v=h.formValidation.get("comment"))?null:v.dirty)||(null==(v=h.formValidation.get("comment"))?null:v.touched)))}}function x(i,g){if(1&i&&(e.TgZ(0,"ion-select-option"),e._uU(1),e.qZA()),2&i){const _=g.$implicit;e.xp6(1),e.Oqu(_)}}function p(i,g){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&i){const _=e.oxw().$implicit;e.xp6(1),e.hij(" ",_.message," ")}}function C(i,g){if(1&i&&(e.ynx(0),e.YNc(1,p,2,1,"div",17),e.BQk()),2&i){const _=g.$implicit,h=e.oxw(2);let v;e.xp6(1),e.Q6J("ngIf",(null==h.formValidation||null==(v=h.formValidation.get("rating"))?null:v.hasError(_.type))&&((null==(v=h.formValidation.get("rating"))?null:v.dirty)||(null==(v=h.formValidation.get("rating"))?null:v.touched)))}}const u=function(){return[0,1,2,3,4,5]};function c(i,g){if(1&i){const _=e.EpF();e.TgZ(0,"ion-content",5)(1,"form",6),e.NdJ("ngSubmit",function(){e.CHM(_);const v=e.oxw();return e.KtG(v.onSubmit(v.formValidation.value))}),e.TgZ(2,"ion-grid")(3,"ion-row")(4,"ion-col",7)(5,"ion-item",8)(6,"ion-label",9),e._uU(7,"Author"),e.qZA(),e.TgZ(8,"ion-input",10),e.NdJ("ngModelChange",function(v){e.CHM(_);const O=e.oxw();return e.KtG(O.newComment.author=v)}),e.qZA()(),e.TgZ(9,"div"),e.YNc(10,w,2,1,"ng-container",11),e.qZA()()(),e.TgZ(11,"ion-row")(12,"ion-col",7)(13,"ion-item",8)(14,"ion-textarea",12),e.NdJ("ngModelChange",function(v){e.CHM(_);const O=e.oxw();return e.KtG(O.newComment.comment=v)}),e.qZA()(),e.TgZ(15,"div"),e.YNc(16,E,2,1,"ng-container",11),e.qZA()()(),e.TgZ(17,"ion-row")(18,"ion-col",7)(19,"ion-item",8)(20,"ion-label"),e._uU(21,"Select rating"),e.qZA(),e.TgZ(22,"ion-select",13),e.NdJ("ngModelChange",function(v){e.CHM(_);const O=e.oxw();return e.KtG(O.newComment.rating=v)}),e.YNc(23,x,2,1,"ion-select-option",11),e.qZA()(),e.TgZ(24,"div"),e.YNc(25,C,2,1,"ng-container",11),e.qZA()()(),e.TgZ(26,"ion-row")(27,"ion-col",14)(28,"div",15)(29,"ion-button",16),e._uU(30,"Add comment"),e.qZA()()()()()()()}if(2&i){const _=e.oxw();e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("formGroup",_.formValidation),e.xp6(7),e.Q6J("ngModel",_.newComment.author),e.xp6(2),e.Q6J("ngForOf",_.formValidationMessages.author),e.xp6(4),e.Q6J("counter",!0)("ngModel",_.newComment.comment),e.xp6(2),e.Q6J("ngForOf",_.formValidationMessages.comment),e.xp6(6),e.Q6J("ngModel",_.newComment.rating),e.xp6(1),e.Q6J("ngForOf",e.DdM(11,u)),e.xp6(2),e.Q6J("ngForOf",_.formValidationMessages.rating),e.xp6(4),e.Q6J("disabled",!_.formValidation.valid)}}let l=(()=>{class i{constructor(_,h,v,O,y,A,b){this.platform=_,this.formBuilder=h,this.aspoticServ=v,this.authService=O,this.navParams=y,this.modalController=A,this.toastController=b,this.userId="",this.formValidationMessages={author:[{type:"required",message:"Author is a required field."}],comment:[{type:"required",message:"Comment is a required field."},{type:"maxlength",message:"The maximum length of a comment is 1000 characters."}],rating:[{type:"required",message:"Rating is a required field."}]},this.newComment={comment:"",rating:0,_id:"",author:"",createdOn:new Date,userId:""},this.formValidation=this.formBuilder.group({author:["",[r.kI.required]],comment:["",r.kI.compose([r.kI.required,r.kI.maxLength(1e3)])],rating:["",[r.kI.required]]})}ngOnInit(){this.formValidation=this.formBuilder.group({author:new r.NI("",r.kI.compose([r.kI.required])),comment:new r.NI("",r.kI.compose([r.kI.maxLength(1e3),r.kI.required])),rating:new r.NI("",r.kI.compose([r.kI.required]))}),this.userId&&this.authService.getUserIdFromToken()}showError(_){var h=this;return(0,f.Z)(function*(){(yield h.toastController.create({message:_,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(_){var h=this;return(0,f.Z)(function*(){(yield h.toastController.create({message:_,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(_){var h=this;return(0,f.Z)(function*(){try{const v=h.trackId=h.navParams.get("trackId"),O=h.newComment;h.newComment.userId=h.userId,h.newComment.createdOn=new Date;const y=yield t.b.getCurrentPosition(),b=y.coords.latitude,I=y.coords.accuracy;O.longitude=y.coords.longitude,O.latitude=b,O.accuracy=I,yield h.aspoticServ.addCommentToTrack(v,O).toPromise(),console.log(O),h.newComment={comment:"",rating:0,_id:"",author:"",createdOn:new Date,userId:""},h.showSuccessMessage("Comment added successfully"),h.dismiss(),h.platform.ready().then(()=>{location.reload()})}catch(v){console.error(v),h.showError("There was a problem adding the comment"),h.dismiss()}})()}}return i.\u0275fac=function(_){return new(_||i)(e.Y36(d.t4),e.Y36(r.qu),e.Y36(a.z),e.Y36(o.e),e.Y36(d.X1),e.Y36(d.IN),e.Y36(d.yF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-comment"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"fullscreen",4,"ngIf"],[3,"fullscreen"],[1,"form",3,"formGroup","ngSubmit"],["size","12"],["id","item","fill","outline"],["position","floating"],["type","text","formControlName","author",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","custom-input","type","text","label","Comment","labelPlacement","floating","maxlength","1000","formControlName","comment",3,"counter","ngModel","ngModelChange"],["formControlName","rating",3,"ngModel","ngModelChange"],["size","12",1,"ion-text-center"],[1,"div-buttons"],["type","submit",1,"custom-btn",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(_,h){1&_&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Add comment"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return h.dismiss()}),e._UZ(6,"ion-icon",3),e.qZA()()()(),e.YNc(7,c,31,12,"ion-content",4)),2&_&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("ngIf",h.formValidation))},dependencies:[n.sg,n.O5,r._Y,r.JJ,r.JL,r.nD,d.YG,d.Sm,d.wI,d.W2,d.jY,d.Gu,d.gu,d.pK,d.Ie,d.Q$,d.Nd,d.t9,d.n0,d.g2,d.wd,d.sr,d.QI,d.j9,r.sg,r.u],styles:[".form[_ngcontent-%COMP%]{width:100%;padding:10px}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:5px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}.div-buttons[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.custom-btn[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;text-transform:capitalize;margin-top:15px;margin-bottom:15px}ion-button[_ngcontent-%COMP%]{width:100%}"]}),i})()},783:(T,P,s)=>{s.d(P,{V:()=>u});var f=s(5861),r=s(433),t=s(6090),e=s(5439),a=s(4814),o=s(6388),n=s(4650),m=s(650),w=s(1468),M=s(7151),E=s(1481),x=s(6895);function p(c,l){if(1&c&&n._UZ(0,"img",17),2&c){const i=n.oxw();n.Q6J("src",i.trackForm.value.imageUrl,n.LSH)}}function C(c,l){1&c&&n._UZ(0,"img",18)}let u=(()=>{class c{constructor(i,g,_,h,v,O,y){this.platform=i,this.aspoticServ=g,this.authService=_,this.modalController=h,this.formBuilder=v,this.sanitizer=O,this.toastController=y,(0,a.q)(window)}ngOnInit(){this.trackForm=this.formBuilder.group({name:["",r.kI.required],artist:["",r.kI.required],album:["",r.kI.required],imageUrl:["",r.kI.required]})}selectFromCamera(){o.V1.getPhoto({quality:100,allowEditing:!1,resultType:o.dk.Base64,source:o.oK.Camera}).then(i=>{const g=new Image;g.src="data:image/jpeg;base64,"+i.base64String,g.onload=()=>{const _=document.createElement("canvas"),h=_.getContext("2d");_.width=640,_.height=640,null==h||h.drawImage(g,0,0,640,640),this.imageUrl=_.toDataURL("image/jpeg"),this.trackForm.patchValue({imageUrl:this.imageUrl})}},i=>{console.error("Error selecting image from camera",i)})}showError(i){var g=this;return(0,f.Z)(function*(){(yield g.toastController.create({message:i,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(i){var g=this;return(0,f.Z)(function*(){(yield g.toastController.create({message:i,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(){var i=this;return(0,f.Z)(function*(){try{const _=e(new Date).format("YYYY-MM-DD").toString(),h=i.authService.getUserIdFromToken(),v=i.trackForm.value,O={name:v.name,album:{artists:[{id:"",name:v.artist}],id:"",images:[{height:300,url:v.imageUrl,width:300}],name:v.album,release_date:_,release_date_precision:"",total_tracks:0},_id:"",duration_ms:0,comments:[],userId:h,id:"",preview_url:""},y=yield t.b.getCurrentPosition(),b=y.coords.latitude,I=y.coords.accuracy;O.longitude=y.coords.longitude,O.latitude=b,O.accuracy=I,console.log("New track:",O),i.aspoticServ.createTrack(O).subscribe(D=>{console.log(D),i.showSuccessMessage("Track created successfully"),i.dismiss(),i.platform.ready().then(()=>{location.reload()})},D=>{console.error(D),i.showError("There was an error creating the track"),i.dismiss()})}catch(g){console.error(g),i.showError("There was an error creating the track"),i.dismiss()}})()}}return c.\u0275fac=function(i){return new(i||c)(n.Y36(m.t4),n.Y36(w.z),n.Y36(M.e),n.Y36(m.IN),n.Y36(r.qu),n.Y36(E.H7),n.Y36(m.yF))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-add-track"]],decls:45,vars:4,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup","ngSubmit"],["size","12",1,"ion-text-center"],["class","image-preview",3,"src",4,"ngIf"],["src","https://lasallealfaro.es/wp-content/uploads/2021/01/placeholder-1.png","class","image-preview-placeholder",4,"ngIf"],["id","item","fill","outline"],["position","floating"],["formControlName","name"],["formControlName","artist"],["formControlName","album"],["formControlName","imageUrl"],[1,"div-buttons"],["expand","block",1,"custom-btn",3,"click"],["type","submit","expand","block",1,"custom-btn",3,"disabled"],[1,"image-preview",3,"src"],["src","https://lasallealfaro.es/wp-content/uploads/2021/01/placeholder-1.png",1,"image-preview-placeholder"]],template:function(i,g){1&i&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Add track"),n.qZA(),n.TgZ(4,"ion-buttons",1)(5,"ion-button",2),n.NdJ("click",function(){return g.dismiss()}),n._UZ(6,"ion-icon",3),n.qZA()()()(),n.TgZ(7,"ion-content")(8,"form",4),n.NdJ("ngSubmit",function(){return g.onSubmit()}),n.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",5),n.YNc(12,p,1,1,"img",6),n.YNc(13,C,1,0,"img",7),n.qZA()(),n.TgZ(14,"ion-row")(15,"ion-col",5)(16,"ion-item",8)(17,"ion-label",9),n._uU(18,"Track name"),n.qZA(),n._UZ(19,"ion-input",10),n.qZA()()(),n.TgZ(20,"ion-row")(21,"ion-col",5)(22,"ion-item",8)(23,"ion-label",9),n._uU(24,"Artist name"),n.qZA(),n._UZ(25,"ion-input",11),n.qZA()()(),n.TgZ(26,"ion-row")(27,"ion-col",5)(28,"ion-item",8)(29,"ion-label",9),n._uU(30,"Album name"),n.qZA(),n._UZ(31,"ion-input",12),n.qZA()()(),n.TgZ(32,"ion-row")(33,"ion-col",5)(34,"ion-item",8)(35,"ion-label",9),n._uU(36,"Track image"),n.qZA(),n._UZ(37,"ion-input",13),n.qZA()()(),n.TgZ(38,"ion-row")(39,"ion-col",5)(40,"div",14)(41,"ion-button",15),n.NdJ("click",function(){return g.selectFromCamera()}),n._uU(42,"Take photo"),n.qZA(),n.TgZ(43,"ion-button",16),n._uU(44,"Add track"),n.qZA()()()()()()()),2&i&&(n.xp6(8),n.Q6J("formGroup",g.trackForm),n.xp6(4),n.Q6J("ngIf",g.trackForm.value.imageUrl),n.xp6(1),n.Q6J("ngIf",!g.trackForm.value.imageUrl),n.xp6(30),n.Q6J("disabled",g.trackForm.invalid))},dependencies:[x.O5,r._Y,r.JJ,r.JL,m.YG,m.Sm,m.wI,m.W2,m.jY,m.Gu,m.gu,m.pK,m.Ie,m.Q$,m.Nd,m.wd,m.sr,m.j9,r.sg,r.u],styles:["#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}.div-buttons[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:10px;margin-left:10px}.image-preview[_ngcontent-%COMP%], .image-preview-placeholder[_ngcontent-%COMP%]{height:200px;text-align:center;border:1px dashed #000;border-radius:15px}.custom-btn[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;text-transform:capitalize;margin-top:15px;margin-bottom:15px}"]}),c})()}}]);