"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{76:(O,x,a)=>{a.d(x,{GW:()=>i,dk:()=>t,oK:()=>_});var _=(()=>{return(n=_||(_={})).Prompt="PROMPT",n.Camera="CAMERA",n.Photos="PHOTOS",_;var n})(),i=(()=>{return(n=i||(i={})).Rear="REAR",n.Front="FRONT",i;var n})(),t=(()=>{return(n=t||(t={})).Uri="uri",n.Base64="base64",n.DataUrl="dataUrl",t;var n})()},7693:(O,x,a)=>{a.d(x,{c:()=>n});var _=a(4083),i=a(7864),t=a(1898);const n=(u,o)=>{let r,l;const c=(w,P,m)=>{if(typeof document>"u")return;const v=document.elementFromPoint(w,P);v&&o(v)?v!==r&&(M(),p(v,m)):M()},p=(w,P)=>{r=w,l||(l=r);const m=r;(0,_.w)(()=>m.classList.add("ion-activated")),P()},M=(w=!1)=>{if(!r)return;const P=r;(0,_.w)(()=>P.classList.remove("ion-activated")),w&&l!==r&&r.click(),r=void 0};return(0,t.createGesture)({el:u,gestureName:"buttonActiveDrag",threshold:0,onStart:w=>c(w.currentX,w.currentY,i.a),onMove:w=>c(w.currentX,w.currentY,i.b),onEnd:()=>{M(!0),(0,i.h)(),l=void 0}})}},2225:(O,x,a)=>{a.d(x,{g:()=>_});const _=(o,r,l,c,p)=>t(o[1],r[1],l[1],c[1],p).map(M=>i(o[0],r[0],l[0],c[0],M)),i=(o,r,l,c,p)=>p*(3*r*Math.pow(p-1,2)+p*(-3*l*p+3*l+c*p))-o*Math.pow(p-1,3),t=(o,r,l,c,p)=>u((c-=p)-3*(l-=p)+3*(r-=p)-(o-=p),3*l-6*r+3*o,3*r-3*o,o).filter(w=>w>=0&&w<=1),u=(o,r,l,c)=>{if(0===o)return((o,r,l)=>{const c=r*r-4*o*l;return c<0?[]:[(-r+Math.sqrt(c))/(2*o),(-r-Math.sqrt(c))/(2*o)]})(r,l,c);const p=(3*(l/=o)-(r/=o)*r)/3,M=(2*r*r*r-9*r*l+27*(c/=o))/27;if(0===p)return[Math.pow(-M,1/3)];if(0===M)return[Math.sqrt(-p),-Math.sqrt(-p)];const w=Math.pow(M/2,2)+Math.pow(p/3,3);if(0===w)return[Math.pow(M/2,.5)-r/3];if(w>0)return[Math.pow(-M/2+Math.sqrt(w),1/3)-Math.pow(M/2+Math.sqrt(w),1/3)-r/3];const P=Math.sqrt(Math.pow(-p/3,3)),m=Math.acos(-M/(2*Math.sqrt(Math.pow(-p/3,3)))),v=2*Math.pow(P,1/3);return[v*Math.cos(m/3)-r/3,v*Math.cos((m+2*Math.PI)/3)-r/3,v*Math.cos((m+4*Math.PI)/3)-r/3]}},5062:(O,x,a)=>{a.d(x,{i:()=>_});const _=i=>i&&""!==i.dir?"rtl"===i.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},6602:(O,x,a)=>{a.r(x),a.d(x,{startFocusVisible:()=>n});const _="ion-focused",t=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],n=u=>{let o=[],r=!0;const l=u?u.shadowRoot:document,c=u||document.body,p=g=>{o.forEach(e=>e.classList.remove(_)),g.forEach(e=>e.classList.add(_)),o=g},M=()=>{r=!1,p([])},w=g=>{r=t.includes(g.key),r||p([])},P=g=>{if(r&&void 0!==g.composedPath){const e=g.composedPath().filter(d=>!!d.classList&&d.classList.contains("ion-focusable"));p(e)}},m=()=>{l.activeElement===c&&p([])};return l.addEventListener("keydown",w),l.addEventListener("focusin",P),l.addEventListener("focusout",m),l.addEventListener("touchstart",M),l.addEventListener("mousedown",M),{destroy:()=>{l.removeEventListener("keydown",w),l.removeEventListener("focusin",P),l.removeEventListener("focusout",m),l.removeEventListener("touchstart",M),l.removeEventListener("mousedown",M)},setFocus:p}}},8689:(O,x,a)=>{a.d(x,{c:()=>i});var _=a(3577);const i=o=>{const r=o;let l;return{hasLegacyControl:()=>{if(void 0===l){const p=void 0!==r.label||t(r),M=r.hasAttribute("aria-label")||r.hasAttribute("aria-labelledby")&&null===r.shadowRoot,w=(0,_.h)(r);l=!0===r.legacy||!p&&!M&&null!==w}return l}}},t=o=>null!==o.shadowRoot&&!!(n.includes(o.tagName)&&null!==o.querySelector('[slot="label"]')||u.includes(o.tagName)&&""!==o.textContent),n=["ION-RANGE"],u=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"]},7864:(O,x,a)=>{a.d(x,{a:()=>n,b:()=>u,c:()=>t,d:()=>r,h:()=>o});const _={getEngine(){var l;const c=window;return c.TapticEngine||(null===(l=c.Capacitor)||void 0===l?void 0:l.isPluginAvailable("Haptics"))&&c.Capacitor.Plugins.Haptics},available(){var l;const c=window;return!!this.getEngine()&&("web"!==(null===(l=c.Capacitor)||void 0===l?void 0:l.getPlatform())||typeof navigator<"u"&&void 0!==navigator.vibrate)},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(l){const c=this.getEngine();if(!c)return;const p=this.isCapacitor()?l.style.toUpperCase():l.style;c.impact({style:p})},notification(l){const c=this.getEngine();if(!c)return;const p=this.isCapacitor()?l.style.toUpperCase():l.style;c.notification({style:p})},selection(){this.impact({style:"light"})},selectionStart(){const l=this.getEngine();l&&(this.isCapacitor()?l.selectionStart():l.gestureSelectionStart())},selectionChanged(){const l=this.getEngine();l&&(this.isCapacitor()?l.selectionChanged():l.gestureSelectionChanged())},selectionEnd(){const l=this.getEngine();l&&(this.isCapacitor()?l.selectionEnd():l.gestureSelectionEnd())}},i=()=>_.available(),t=()=>{i()&&_.selection()},n=()=>{i()&&_.selectionStart()},u=()=>{i()&&_.selectionChanged()},o=()=>{i()&&_.selectionEnd()},r=l=>{i()&&_.impact(l)}},7366:(O,x,a)=>{a.d(x,{a:()=>_,b:()=>P,c:()=>r,d:()=>m,e:()=>E,f:()=>o,g:()=>v,h:()=>t,i:()=>i,j:()=>C,k:()=>h,l:()=>l,m:()=>M,n:()=>g,o:()=>p,p:()=>u,q:()=>n,r:()=>s,s:()=>f,t:()=>w,u:()=>e,v:()=>d,w:()=>c});const _="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M368 64L144 256l224 192V64z'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 144l192 224 192-224H64z'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 368L256 144 64 368h384z'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M416 128L192 384l-96-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M136 208l120-104 120 104M136 304l120 104 120-104' stroke-width='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",M="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",P="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='192' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",g="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",s="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",C="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",E="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"},2055:(O,x,a)=>{a.d(x,{I:()=>o,a:()=>p,b:()=>u,c:()=>P,d:()=>v,f:()=>M,g:()=>c,i:()=>l,p:()=>m,r:()=>g,s:()=>w});var _=a(5861),i=a(3577),t=a(1178);const u="ion-content",o=".ion-content-scroll-host",r=`${u}, ${o}`,l=e=>"ION-CONTENT"===e.tagName,c=function(){var e=(0,_.Z)(function*(d){return l(d)?(yield new Promise(s=>(0,i.c)(d,s)),d.getScrollElement()):d});return function(s){return e.apply(this,arguments)}}(),p=e=>e.querySelector(o)||e.querySelector(r),M=e=>e.closest(r),w=(e,d)=>l(e)?e.scrollToTop(d):Promise.resolve(e.scrollTo({top:0,left:0,behavior:d>0?"smooth":"auto"})),P=(e,d,s,C)=>l(e)?e.scrollByPoint(d,s,C):Promise.resolve(e.scrollBy({top:s,left:d,behavior:C>0?"smooth":"auto"})),m=e=>(0,t.b)(e,u),v=e=>{if(l(e)){const s=e.scrollY;return e.scrollY=!1,s}return e.style.setProperty("overflow","hidden"),!0},g=(e,d)=>{l(e)?e.scrollY=d:e.style.removeProperty("overflow")}},9240:(O,x,a)=>{a.d(x,{g:()=>i});var _=a(1178);const i=(n,u,o)=>{const r=null==n?0:n.toString().length,l=t(r,u);if(void 0===o)return l;try{return o(r,u)}catch(c){return(0,_.a)("Exception in provided `counterFormatter`.",c),l}},t=(n,u)=>`${n} / ${u}`},5234:(O,x,a)=>{a.r(x),a.d(x,{KEYBOARD_DID_CLOSE:()=>i,KEYBOARD_DID_OPEN:()=>_,copyVisualViewport:()=>d,keyboardDidClose:()=>m,keyboardDidOpen:()=>w,keyboardDidResize:()=>P,resetKeyboardAssist:()=>r,setKeyboardClose:()=>M,setKeyboardOpen:()=>p,startKeyboardAssist:()=>l,trackViewportChanges:()=>e});const _="ionKeyboardDidShow",i="ionKeyboardDidHide";let n={},u={},o=!1;const r=()=>{n={},u={},o=!1},l=s=>{c(s),s.visualViewport&&(u=d(s.visualViewport),s.visualViewport.onresize=()=>{e(s),w()||P(s)?p(s):m(s)&&M(s)})},c=s=>{s.addEventListener("keyboardDidShow",C=>p(s,C)),s.addEventListener("keyboardDidHide",()=>M(s))},p=(s,C)=>{v(s,C),o=!0},M=s=>{g(s),o=!1},w=()=>!o&&n.width===u.width&&(n.height-u.height)*u.scale>150,P=s=>o&&!m(s),m=s=>o&&u.height===s.innerHeight,v=(s,C)=>{const f=new CustomEvent(_,{detail:{keyboardHeight:C?C.keyboardHeight:s.innerHeight-u.height}});s.dispatchEvent(f)},g=s=>{const C=new CustomEvent(i);s.dispatchEvent(C)},e=s=>{n=Object.assign({},u),u=d(s.visualViewport)},d=s=>({width:Math.round(s.width),height:Math.round(s.height),offsetTop:s.offsetTop,offsetLeft:s.offsetLeft,pageTop:s.pageTop,pageLeft:s.pageLeft,scale:s.scale})},9852:(O,x,a)=>{a.d(x,{c:()=>i});var _=a(3457);const i=t=>{let n,u,o;const r=()=>{n=()=>{o=!0,t&&t(!0)},u=()=>{o=!1,t&&t(!1)},null==_.w||_.w.addEventListener("keyboardWillShow",n),null==_.w||_.w.addEventListener("keyboardWillHide",u)};return r(),{init:r,destroy:()=>{null==_.w||_.w.removeEventListener("keyboardWillShow",n),null==_.w||_.w.removeEventListener("keyboardWillHide",u),n=u=void 0},isKeyboardVisible:()=>o}}},7741:(O,x,a)=>{a.d(x,{S:()=>i});const i={bubbles:{dur:1e3,circles:9,fn:(t,n,u)=>{const o=t*n/u-t+"ms",r=2*Math.PI*n/u;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":o}}}},circles:{dur:1e3,circles:8,fn:(t,n,u)=>{const o=n/u,r=t*o-t+"ms",l=2*Math.PI*o;return{r:5,style:{top:9*Math.sin(l)+"px",left:9*Math.cos(l)+"px","animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,n)=>({r:6,style:{left:9-9*n+"px","animation-delay":-110*n+"ms"}})},lines:{dur:1e3,lines:8,fn:(t,n,u)=>({y1:14,y2:26,style:{transform:`rotate(${360/u*n+(n<u/2?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(t,n,u)=>({y1:12,y2:20,style:{transform:`rotate(${360/u*n+(n<u/2?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(t,n,u)=>({y1:17,y2:29,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(t,n,u)=>({y1:12,y2:20,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})}}},7539:(O,x,a)=>{a.r(x),a.d(x,{createSwipeBackGesture:()=>u});var _=a(3577),i=a(5062),t=a(1898);a(4349);const u=(o,r,l,c,p)=>{const M=o.ownerDocument.defaultView;let w=(0,i.i)(o);const m=s=>w?-s.deltaX:s.deltaX;return(0,t.createGesture)({el:o,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:s=>(w=(0,i.i)(o),(s=>{const{startX:h}=s;return w?h>=M.innerWidth-50:h<=50})(s)&&r()),onStart:l,onMove:s=>{const h=m(s)/M.innerWidth;c(h)},onEnd:s=>{const C=m(s),h=M.innerWidth,f=C/h,E=(s=>w?-s.velocityX:s.velocityX)(s),y=E>=0&&(E>.2||C>h/2),b=(y?1-f:f)*h;let I=0;if(b>5){const D=b/Math.abs(E);I=Math.min(D,540)}p(y,f<=0?.01:(0,_.l)(0,f,.9999),I)}})}},5381:(O,x,a)=>{a.d(x,{i:()=>M});var _=a(5861),i=a(433),t=a(4814),n=a(5439),o=a(4650),r=a(650),l=a(1468),c=a(7151),p=a(1481);let M=(()=>{class w{constructor(m,v,g,e,d,s,C,h){this.platform=m,this.navParams=v,this.aspoticServ=g,this.authService=e,this.modalController=d,this.formBuilder=s,this.sanitizer=C,this.toastController=h,(0,t.q)(window)}ngOnInit(){this.trackForm=this.formBuilder.group({name:["",i.kI.required],artist:["",i.kI.required],imageUrl:["",i.kI.required]}),this.getTrackData()}getTrackData(){this.aspoticServ.getTrackById(this.trackId).subscribe(m=>{this.trackForm.patchValue({name:m.name,artist:m.album.artists[0].name,imageUrl:m.album.images[0].url})},m=>{console.error("Error getting track data",m)})}showError(m){var v=this;return(0,_.Z)(function*(){(yield v.toastController.create({message:m,duration:3e3,color:"danger",mode:"ios",position:"bottom"})).present()})()}showSuccessMessage(m){var v=this;return(0,_.Z)(function*(){(yield v.toastController.create({message:m,duration:3e3,color:"success",mode:"ios",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(){if(this.trackForm.invalid)return;const m=this.trackId=this.navParams.get("trackId"),g=n(new Date).format("YYYY-MM-DD").toString(),e=this.authService.getUserIdFromToken();this.aspoticServ.editTrack(m,{_id:this.trackId,name:this.trackForm.value.name,album:{artists:[{id:"",name:this.trackForm.value.artist}],images:[{height:0,url:this.trackForm.value.imageUrl,width:0}],id:"",name:"",release_date:g,release_date_precision:"",total_tracks:0},duration_ms:0,comments:[],userId:e}).subscribe(s=>{console.log("Track updated successfully",s),this.showSuccessMessage("Track updated successfully"),this.dismiss(),this.platform.ready().then(()=>{location.reload()})},s=>{console.error("Error updating track",s),this.showError("Error updating track"),this.dismiss()})}}return w.\u0275fac=function(m){return new(m||w)(o.Y36(r.t4),o.Y36(r.X1),o.Y36(l.z),o.Y36(c.e),o.Y36(r.IN),o.Y36(i.qu),o.Y36(p.H7),o.Y36(r.yF))},w.\u0275cmp=o.Xpm({type:w,selectors:[["app-edit-track"]],decls:23,vars:3,consts:[[3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup","ngSubmit"],["position","stacked"],["formControlName","name"],["formControlName","artist"],["formControlName","imageUrl"],["type","submit","expand","block",3,"disabled"]],template:function(m,v){1&m&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"Edit track"),o.qZA(),o.TgZ(4,"ion-buttons",1)(5,"ion-button",2),o.NdJ("click",function(){return v.dismiss()}),o._UZ(6,"ion-icon",3),o.qZA()()()(),o.TgZ(7,"ion-content")(8,"form",4),o.NdJ("ngSubmit",function(){return v.onSubmit()}),o.TgZ(9,"ion-item")(10,"ion-label",5),o._uU(11,"Nombre canci\xf3n"),o.qZA(),o._UZ(12,"ion-input",6),o.qZA(),o.TgZ(13,"ion-item")(14,"ion-label",5),o._uU(15,"Artista"),o.qZA(),o._UZ(16,"ion-input",7),o.qZA(),o.TgZ(17,"ion-item")(18,"ion-label",5),o._uU(19,"Imagen actual"),o.qZA(),o._UZ(20,"ion-input",8),o.qZA(),o.TgZ(21,"ion-button",9),o._uU(22,"Guardar cambios"),o.qZA()()()),2&m&&(o.Q6J("translucent",!0),o.xp6(8),o.Q6J("formGroup",v.trackForm),o.xp6(13),o.Q6J("disabled",v.trackForm.invalid))},dependencies:[i._Y,i.JJ,i.JL,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.wd,r.sr,r.j9,i.sg,i.u]}),w})()},4762:(O,x,a)=>{a.d(x,{Z:()=>o});var _=a(4650),i=a(1468),t=a(7151),n=a(1194),u=a(650);let o=(()=>{class r{constructor(c,p,M){this.aspoticServ=c,this.authService=p,this.router=M}onSignOutClick(){const c=this.authService.getUserIdFromToken();this.authService.signOut(c).subscribe(()=>{localStorage.removeItem("token"),this.router.navigate(["/home"])})}}return r.\u0275fac=function(c){return new(c||r)(_.Y36(i.z),_.Y36(t.e),_.Y36(n.F0))},r.\u0275cmp=_.Xpm({type:r,selectors:[["app-explore-container"]],decls:6,vars:0,consts:[[1,"ion-no-border"],[1,"custom-title"],["slot","end",1,"custom-btn","add-margin-right",3,"click"]],template:function(c,p){1&c&&(_.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),_._uU(3,"ASPOTIC"),_.qZA(),_.TgZ(4,"ion-button",2),_.NdJ("click",function(){return p.onSignOutClick()}),_._uU(5," SignOut "),_.qZA()()())},dependencies:[u.YG,u.Gu,u.wd,u.sr],styles:[".custom-title[_ngcontent-%COMP%]{color:#858bff}.cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center;margin-bottom:20px}ion-card[_ngcontent-%COMP%]{width:150px;height:140px;margin:50px;position:relative}ion-card[_ngcontent-%COMP%]:hover   .overlayer[_ngcontent-%COMP%]{visibility:visible}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:center;justify-content:center;margin-top:180px}ion-card-title[_ngcontent-%COMP%]{font-size:medium;color:#fff;text-align:center;justify-content:center}ion-card-subtitle[_ngcontent-%COMP%]{font-size:small;color:#ccc;text-align:center;justify-content:center}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{top:-175px;color:#fff;position:relative;font-size:13px;text-decoration:none}ion-fab[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px}ion-fab-button[_ngcontent-%COMP%]{font-size:16px}ion-icon[_ngcontent-%COMP%]{text-align:center}.center-btn[_ngcontent-%COMP%]{margin-right:15px}img[_ngcontent-%COMP%]{border-radius:5%}ion-icon[_ngcontent-%COMP%]{color:#fff}.custom-btn[_ngcontent-%COMP%], .custom-btn-add[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;text-transform:capitalize;margin-top:15px;margin-bottom:15px}.add-margin-right[_ngcontent-%COMP%]{margin-right:15px}@media only screen and (max-width: 600px){.search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.custom-btn[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}}@media only screen and (min-width: 601px){.search-container[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.custom-btn[_ngcontent-%COMP%]{margin-right:15px}}"]}),r})()},581:(O,x,a)=>{a.d(x,{e:()=>u});var _=a(6895),i=a(433),t=a(650),n=a(4650);let u=(()=>{class o{}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[_.ez,i.u5,t.Pc]}),o})()},8449:(O,x,a)=>{a.d(x,{X:()=>P});var _=a(5861),i=a(433),t=a(4650),n=a(7151),u=a(1194),o=a(650),r=a(6895);function l(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function c(m,v){if(1&m&&(t.ynx(0),t.YNc(1,l,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,e=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==e.formValidation||null==(d=e.formValidation.get("username"))?null:d.hasError(g.type))&&((null==(d=e.formValidation.get("username"))?null:d.dirty)||(null==(d=e.formValidation.get("username"))?null:d.touched)))}}function p(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function M(m,v){if(1&m&&(t.ynx(0),t.YNc(1,p,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,e=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==(d=e.formValidation.get("password"))?null:d.hasError(g.type))&&((null==(d=e.formValidation.get("password"))?null:d.dirty)||(null==(d=e.formValidation.get("password"))?null:d.touched)))}}function w(m,v){if(1&m){const g=t.EpF();t.TgZ(0,"ion-content")(1,"div",5)(2,"form",6),t.NdJ("ngSubmit",function(){t.CHM(g);const d=t.oxw();return t.KtG(d.tryLogin(d.formValidation.value))}),t.TgZ(3,"ion-item",7)(4,"ion-label",8),t._uU(5,"Email"),t.qZA(),t._UZ(6,"ion-input",9),t.qZA(),t.TgZ(7,"div"),t.YNc(8,c,2,1,"ng-container",10),t.qZA(),t.TgZ(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Password"),t.qZA(),t._UZ(12,"ion-input",11),t.qZA(),t.TgZ(13,"div"),t.YNc(14,M,2,1,"ng-container",10),t.qZA(),t.TgZ(15,"div",12)(16,"ion-button",13),t._uU(17,"Sign In"),t.qZA()()()()()}if(2&m){const g=t.oxw();t.xp6(2),t.Q6J("formGroup",g.formValidation),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.username),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.password),t.xp6(2),t.Q6J("disabled",!g.formValidation.valid)}}let P=(()=>{class m{constructor(g,e,d,s,C){this.authService=g,this.router=e,this.formBuilder=d,this.modalController=s,this.toastController=C,this.formValidationMessages={username:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]},this.formValidation=this.formBuilder.group({username:["",i.kI.compose([i.kI.required,i.kI.email])],password:["",i.kI.compose([i.kI.required,i.kI.minLength(6)])]})}ngOnInit(){this.formValidation=this.formBuilder.group({username:new i.NI("",i.kI.compose([i.kI.required,i.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new i.NI("",i.kI.compose([i.kI.minLength(6),i.kI.required]))})}dismiss(){this.modalController.dismiss()}showError(g){var e=this;return(0,_.Z)(function*(){(yield e.toastController.create({message:g,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(g){var e=this;return(0,_.Z)(function*(){(yield e.toastController.create({message:g,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}tryLogin(g){this.authService.login(g).subscribe(e=>{console.log("Successful login")},e=>{console.error("Failed to sign in",e)}),this.authService.doLogin(g).then(e=>{this.showSuccessMessage("Successful login"),this.dismiss(),this.router.navigate(["/tabs"])},e=>{"auth/user-not-found"==e.code&&this.showError("There is no user record that corresponds to the email entered"),"auth/wrong-password"==e.code&&this.showError("The password entered is not correct"),console.log(e)})}}return m.\u0275fac=function(g){return new(g||m)(t.Y36(n.e),t.Y36(u.F0),t.Y36(i.qu),t.Y36(o.IN),t.Y36(o.yF))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[4,"ngIf"],["id","container"],[1,"form",3,"formGroup","ngSubmit"],["id","item","fill","outline"],["position","floating"],["type","text","formControlName","username"],[4,"ngFor","ngForOf"],["type","password","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(g,e){1&g&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sing In"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return e.dismiss()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.YNc(7,w,18,4,"ion-content",4)),2&g&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",e.formValidation))},dependencies:[r.sg,r.O5,i._Y,i.JJ,i.JL,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.wd,o.sr,o.j9,i.sg,i.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px;width:100%;padding:20px}.label-title[_ngcontent-%COMP%]{font-size:x-large;font-weight:500;color:#000;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:20px}ion-button[_ngcontent-%COMP%]{width:100%;margin:10px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:small;margin-bottom:10px;margin-right:10px;margin-left:10px}.error-alert[_ngcontent-%COMP%]{color:#f08383;background-color:#f08383;border-radius:20px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}"]}),m})()},8391:(O,x,a)=>{a.d(x,{V:()=>P});var _=a(5861),i=a(433),t=a(4650),n=a(7151),u=a(1194),o=a(650),r=a(6895);function l(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function c(m,v){if(1&m&&(t.ynx(0),t.YNc(1,l,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,e=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==e.formValidation||null==(d=e.formValidation.get("username"))?null:d.hasError(g.type))&&((null==(d=e.formValidation.get("username"))?null:d.dirty)||(null==(d=e.formValidation.get("username"))?null:d.touched)))}}function p(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function M(m,v){if(1&m&&(t.ynx(0),t.YNc(1,p,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,e=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==(d=e.formValidation.get("password"))?null:d.hasError(g.type))&&((null==(d=e.formValidation.get("password"))?null:d.dirty)||(null==(d=e.formValidation.get("password"))?null:d.touched)))}}function w(m,v){if(1&m){const g=t.EpF();t.TgZ(0,"ion-content")(1,"div",5)(2,"form",6),t.NdJ("ngSubmit",function(){t.CHM(g);const d=t.oxw();return t.KtG(d.trySignUp(d.formValidation.value))}),t.TgZ(3,"ion-item",7)(4,"ion-label",8),t._uU(5,"Email"),t.qZA(),t._UZ(6,"ion-input",9),t.qZA(),t.TgZ(7,"div"),t.YNc(8,c,2,1,"ng-container",10),t.qZA(),t.TgZ(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Password"),t.qZA(),t._UZ(12,"ion-input",11),t.qZA(),t.TgZ(13,"div"),t.YNc(14,M,2,1,"ng-container",10),t.qZA(),t.TgZ(15,"div",12)(16,"ion-button",13),t._uU(17,"Sign Up"),t.qZA()()()()()}if(2&m){const g=t.oxw();t.xp6(2),t.Q6J("formGroup",g.formValidation),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.username),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.password),t.xp6(2),t.Q6J("disabled",!g.formValidation.valid)}}let P=(()=>{class m{constructor(g,e,d,s,C){this.authService=g,this.formBuilder=e,this.router=d,this.toastController=s,this.modalController=C,this.errorMessage="",this.formValidationMessages={username:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]}}ngOnInit(){this.formValidation=this.formBuilder.group({username:new i.NI("",i.kI.compose([i.kI.required,i.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new i.NI("",i.kI.compose([i.kI.minLength(6),i.kI.required]))})}showError(g){var e=this;return(0,_.Z)(function*(){(yield e.toastController.create({message:g,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(g){var e=this;return(0,_.Z)(function*(){(yield e.toastController.create({message:g,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}trySignUp(g){this.authService.signup(g).subscribe(e=>{console.log("Successful sign up")},e=>{console.error("Failed to sign up",e)}),this.authService.createUser(g).then(e=>{console.log("Successful sign up"),this.showSuccessMessage("Successful sign up, now you can sing in"),this.dismiss(),this.router.navigate(["/home"])},e=>{"auth/email-already-in-use"==e.code&&this.showError("User already exists"),"auth/invalid-email"==e.code&&this.showError("The email format is incorrect"),console.log(e)})}}return m.\u0275fac=function(g){return new(g||m)(t.Y36(n.e),t.Y36(i.qu),t.Y36(u.F0),t.Y36(o.yF),t.Y36(o.IN))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-signup"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[4,"ngIf"],["id","container"],[1,"form",3,"formGroup","ngSubmit"],["id","item","fill","outline"],["position","floating"],["type","text","formControlName","username"],[4,"ngFor","ngForOf"],["type","password","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(g,e){1&g&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sign Up"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return e.dismiss()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.YNc(7,w,18,4,"ion-content",4)),2&g&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",e.formValidation))},dependencies:[r.sg,r.O5,i._Y,i.JJ,i.JL,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.wd,o.sr,o.j9,i.sg,i.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px;width:100%;padding:20px}.label-title[_ngcontent-%COMP%]{font-size:x-large;font-weight:500;color:#000;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:20px}ion-button[_ngcontent-%COMP%]{width:100%;margin:10px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:small;margin-bottom:10px;margin-right:10px;margin-left:10px}.error-alert[_ngcontent-%COMP%]{color:#f08383;background-color:#f08383;border-radius:20px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}"]}),m})()},4133:(O,x,a)=>{a.d(x,{R:()=>d});var _=a(5861),i=a(433),t=a(6090),n=a(4650),u=a(650),o=a(1468),r=a(7151),l=a(6895);function c(s,C){if(1&s&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&s){const h=n.oxw().$implicit;n.xp6(1),n.hij(" ",h.message," ")}}function p(s,C){if(1&s&&(n.ynx(0),n.YNc(1,c,2,1,"div",13),n.BQk()),2&s){const h=C.$implicit,f=n.oxw(2);let E;n.xp6(1),n.Q6J("ngIf",(null==f.formValidation||null==(E=f.formValidation.get("author"))?null:E.hasError(h.type))&&((null==(E=f.formValidation.get("author"))?null:E.dirty)||(null==(E=f.formValidation.get("author"))?null:E.touched)))}}function M(s,C){if(1&s&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&s){const h=n.oxw().$implicit;n.xp6(1),n.hij(" ",h.message," ")}}function w(s,C){if(1&s&&(n.ynx(0),n.YNc(1,M,2,1,"div",13),n.BQk()),2&s){const h=C.$implicit,f=n.oxw(2);let E;n.xp6(1),n.Q6J("ngIf",(null==f.formValidation||null==(E=f.formValidation.get("comment"))?null:E.hasError(h.type))&&((null==(E=f.formValidation.get("comment"))?null:E.dirty)||(null==(E=f.formValidation.get("comment"))?null:E.touched)))}}function P(s,C){if(1&s&&(n.TgZ(0,"ion-select-option"),n._uU(1),n.qZA()),2&s){const h=C.$implicit;n.xp6(1),n.Oqu(h)}}function m(s,C){if(1&s&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&s){const h=n.oxw().$implicit;n.xp6(1),n.hij(" ",h.message," ")}}function v(s,C){if(1&s&&(n.ynx(0),n.YNc(1,m,2,1,"div",13),n.BQk()),2&s){const h=C.$implicit,f=n.oxw(2);let E;n.xp6(1),n.Q6J("ngIf",(null==f.formValidation||null==(E=f.formValidation.get("rating"))?null:E.hasError(h.type))&&((null==(E=f.formValidation.get("rating"))?null:E.dirty)||(null==(E=f.formValidation.get("rating"))?null:E.touched)))}}const g=function(){return[0,1,2,3,4,5]};function e(s,C){if(1&s){const h=n.EpF();n.TgZ(0,"ion-content",5)(1,"form",6),n.NdJ("ngSubmit",function(){n.CHM(h);const E=n.oxw();return n.KtG(E.onSubmit(E.formValidation.value))}),n.TgZ(2,"ion-list")(3,"ion-item")(4,"ion-label"),n._uU(5,"Author"),n.qZA(),n.TgZ(6,"ion-input",7),n.NdJ("ngModelChange",function(E){n.CHM(h);const T=n.oxw();return n.KtG(T.newComment.author=E)}),n.qZA()(),n.TgZ(7,"div"),n.YNc(8,p,2,1,"ng-container",8),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Comment"),n.qZA(),n.TgZ(12,"ion-textarea",9),n.NdJ("ngModelChange",function(E){n.CHM(h);const T=n.oxw();return n.KtG(T.newComment.comment=E)}),n.qZA()(),n.TgZ(13,"div"),n.YNc(14,w,2,1,"ng-container",8),n.qZA(),n.TgZ(15,"ion-item")(16,"ion-label"),n._uU(17,"Select rating"),n.qZA(),n.TgZ(18,"ion-select",10),n.NdJ("ngModelChange",function(E){n.CHM(h);const T=n.oxw();return n.KtG(T.newComment.rating=E)}),n.YNc(19,P,2,1,"ion-select-option",8),n.qZA()(),n.TgZ(20,"div"),n.YNc(21,v,2,1,"ng-container",8),n.qZA()(),n.TgZ(22,"div",11)(23,"ion-button",12),n._uU(24,"A\xf1adir comentario"),n.qZA()()()()}if(2&s){const h=n.oxw();n.Q6J("fullscreen",!0),n.xp6(1),n.Q6J("formGroup",h.formValidation),n.xp6(5),n.Q6J("ngModel",h.newComment.author),n.xp6(2),n.Q6J("ngForOf",h.formValidationMessages.author),n.xp6(4),n.Q6J("counter",!0)("ngModel",h.newComment.comment),n.xp6(2),n.Q6J("ngForOf",h.formValidationMessages.comment),n.xp6(4),n.Q6J("ngModel",h.newComment.rating),n.xp6(1),n.Q6J("ngForOf",n.DdM(11,g)),n.xp6(2),n.Q6J("ngForOf",h.formValidationMessages.rating),n.xp6(2),n.Q6J("disabled",!h.formValidation.valid)}}let d=(()=>{class s{constructor(h,f,E,T,y,A,b){this.platform=h,this.formBuilder=f,this.aspoticServ=E,this.authService=T,this.navParams=y,this.modalController=A,this.toastController=b,this.userId="",this.formValidationMessages={author:[{type:"required",message:"El autor es un campo obligatorio."}],comment:[{type:"required",message:"El comentario es un campo obligatorio."},{type:"maxlength",message:"La l\xf3ngitud m\xe1xima de un comentario es 1000 caracteres."}],rating:[{type:"required",message:"El rating es un campo obligatorio."}]},this.newComment={comment:"",rating:0,_id:"",author:"",createdOn:new Date,userId:""},this.formValidation=this.formBuilder.group({author:["",[i.kI.required]],comment:["",i.kI.compose([i.kI.required,i.kI.maxLength(1e3)])],rating:["",[i.kI.required]]})}ngOnInit(){this.formValidation=this.formBuilder.group({author:new i.NI("",i.kI.compose([i.kI.required])),comment:new i.NI("",i.kI.compose([i.kI.maxLength(1e3),i.kI.required])),rating:new i.NI("",i.kI.compose([i.kI.required]))}),this.userId&&this.authService.getUserIdFromToken()}showError(h){var f=this;return(0,_.Z)(function*(){(yield f.toastController.create({message:h,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(h){var f=this;return(0,_.Z)(function*(){(yield f.toastController.create({message:h,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(h){var f=this;return(0,_.Z)(function*(){try{const E=f.trackId=f.navParams.get("trackId"),T=f.newComment;f.newComment.userId=f.userId,f.newComment.createdOn=new Date;const y=yield t.b.getCurrentPosition(),b=y.coords.latitude,I=y.coords.accuracy;T.longitude=y.coords.longitude,T.latitude=b,T.accuracy=I,f.aspoticServ.addCommentToTrack(E,T).subscribe(D=>{console.log(D),f.newComment={comment:"",rating:0,_id:"",author:"",createdOn:new Date,userId:""}}),f.showSuccessMessage("Comment added successfully"),f.dismiss(),f.platform.ready().then(()=>{location.reload()})}catch(E){console.error(E),f.showError("There was a problem adding the comment"),f.dismiss()}})()}}return s.\u0275fac=function(h){return new(h||s)(n.Y36(u.t4),n.Y36(i.qu),n.Y36(o.z),n.Y36(r.e),n.Y36(u.X1),n.Y36(u.IN),n.Y36(u.yF))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-add-comment"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"fullscreen",4,"ngIf"],[3,"fullscreen"],[1,"form",3,"formGroup","ngSubmit"],["type","text","formControlName","author",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","custom-input","type","text","label","Comment","labelPlacement","floating","maxlength","1000","formControlName","comment",3,"counter","ngModel","ngModelChange"],["formControlName","rating",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(h,f){1&h&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Add comment"),n.qZA(),n.TgZ(4,"ion-buttons",1)(5,"ion-button",2),n.NdJ("click",function(){return f.dismiss()}),n._UZ(6,"ion-icon",3),n.qZA()()()(),n.YNc(7,e,25,12,"ion-content",4)),2&h&&(n.Q6J("translucent",!0),n.xp6(7),n.Q6J("ngIf",f.formValidation))},dependencies:[l.sg,l.O5,i._Y,i.JJ,i.JL,i.nD,u.YG,u.Sm,u.W2,u.Gu,u.gu,u.pK,u.Ie,u.Q$,u.q_,u.t9,u.n0,u.g2,u.wd,u.sr,u.QI,u.j9,i.sg,i.u],styles:[".error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:5px}"]}),s})()},4244:(O,x,a)=>{a.d(x,{V:()=>m});var _=a(5861),i=a(433),t=a(6090),n=a(5439),u=a(4814),o=a(7423),r=a(76);const l=(0,o.fo)("Camera",{web:()=>a.e(3954).then(a.bind(a,3954)).then(v=>new v.CameraWeb)});var c=a(4650),p=a(650),M=a(1468),w=a(7151),P=a(1481);let m=(()=>{class v{constructor(e,d,s,C,h,f,E){this.platform=e,this.aspoticServ=d,this.authService=s,this.modalController=C,this.formBuilder=h,this.sanitizer=f,this.toastController=E,(0,u.q)(window)}ngOnInit(){this.trackForm=this.formBuilder.group({name:["",i.kI.required],artist:["",i.kI.required],imageUrl:["",i.kI.required]})}selectFromCamera(){l.getPhoto({quality:100,allowEditing:!1,resultType:r.dk.Base64,source:r.oK.Camera}).then(e=>{const d=new Image;d.src="data:image/jpeg;base64,"+e.base64String,d.onload=()=>{const s=document.createElement("canvas"),C=s.getContext("2d");s.width=640,s.height=640,null==C||C.drawImage(d,0,0,640,640),this.imageUrl=s.toDataURL("image/jpeg"),this.trackForm.patchValue({imageUrl:this.imageUrl})}},e=>{console.error("Error selecting image from camera",e)})}showError(e){var d=this;return(0,_.Z)(function*(){(yield d.toastController.create({message:e,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(e){var d=this;return(0,_.Z)(function*(){(yield d.toastController.create({message:e,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(){var e=this;return(0,_.Z)(function*(){try{const s=n(new Date).format("YYYY-MM-DD").toString(),C=e.authService.getUserIdFromToken(),h=e.trackForm.value,f={name:h.name,album:{artists:[{id:"",name:h.artist}],id:"",images:[{height:300,url:h.imageUrl,width:300}],name:"",release_date:s,release_date_precision:"",total_tracks:0},_id:"",duration_ms:0,comments:[],userId:C},E=yield t.b.getCurrentPosition(),y=E.coords.latitude,A=E.coords.accuracy;f.longitude=E.coords.longitude,f.latitude=y,f.accuracy=A,console.log("New track:",f),e.aspoticServ.createTrack(f).subscribe(b=>{console.log(b),e.showSuccessMessage("Track created successfully"),e.dismiss(),e.platform.ready().then(()=>{location.reload()})},b=>{console.error(b),e.showError("There was an error creating the track"),e.dismiss()})}catch(d){console.error(d),e.showError("There was an error creating the track"),e.dismiss()}})()}}return v.\u0275fac=function(e){return new(e||v)(c.Y36(p.t4),c.Y36(M.z),c.Y36(w.e),c.Y36(p.IN),c.Y36(i.qu),c.Y36(P.H7),c.Y36(p.yF))},v.\u0275cmp=c.Xpm({type:v,selectors:[["app-add-track"]],decls:25,vars:2,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup","ngSubmit"],["position","stacked"],["formControlName","name"],["formControlName","artist"],["formControlName","imageUrl"],["expand","block",3,"click"],["type","submit","expand","block",3,"disabled"]],template:function(e,d){1&e&&(c.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),c._uU(3,"Add track"),c.qZA(),c.TgZ(4,"ion-buttons",1)(5,"ion-button",2),c.NdJ("click",function(){return d.dismiss()}),c._UZ(6,"ion-icon",3),c.qZA()()()(),c.TgZ(7,"ion-content")(8,"form",4),c.NdJ("ngSubmit",function(){return d.onSubmit()}),c.TgZ(9,"ion-item")(10,"ion-label",5),c._uU(11,"Track name"),c.qZA(),c._UZ(12,"ion-input",6),c.qZA(),c.TgZ(13,"ion-item")(14,"ion-label",5),c._uU(15,"Artist name"),c.qZA(),c._UZ(16,"ion-input",7),c.qZA(),c.TgZ(17,"ion-item")(18,"ion-label",5),c._uU(19,"Track image"),c.qZA(),c._UZ(20,"ion-input",8),c.qZA(),c.TgZ(21,"ion-button",9),c.NdJ("click",function(){return d.selectFromCamera()}),c._uU(22,"Seleccionar desde C\xe1mara"),c.qZA(),c.TgZ(23,"ion-button",10),c._uU(24,"Add track"),c.qZA()()()),2&e&&(c.xp6(8),c.Q6J("formGroup",d.trackForm),c.xp6(15),c.Q6J("disabled",d.trackForm.invalid))},dependencies:[i._Y,i.JJ,i.JL,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.pK,p.Ie,p.Q$,p.wd,p.sr,p.j9,i.sg,i.u]}),v})()}}]);