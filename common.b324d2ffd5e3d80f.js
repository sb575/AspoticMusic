"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{76:(O,P,l)=>{l.d(P,{GW:()=>o,dk:()=>t,oK:()=>h});var h=(()=>{return(n=h||(h={})).Prompt="PROMPT",n.Camera="CAMERA",n.Photos="PHOTOS",h;var n})(),o=(()=>{return(n=o||(o={})).Rear="REAR",n.Front="FRONT",o;var n})(),t=(()=>{return(n=t||(t={})).Uri="uri",n.Base64="base64",n.DataUrl="dataUrl",t;var n})()},7693:(O,P,l)=>{l.d(P,{c:()=>n});var h=l(4083),o=l(7864),t=l(1898);const n=(u,e)=>{let c,r;const a=(w,x,m)=>{if(typeof document>"u")return;const v=document.elementFromPoint(w,x);v&&e(v)?v!==c&&(C(),_(v,m)):C()},_=(w,x)=>{c=w,r||(r=c);const m=c;(0,h.w)(()=>m.classList.add("ion-activated")),x()},C=(w=!1)=>{if(!c)return;const x=c;(0,h.w)(()=>x.classList.remove("ion-activated")),w&&r!==c&&c.click(),c=void 0};return(0,t.createGesture)({el:u,gestureName:"buttonActiveDrag",threshold:0,onStart:w=>a(w.currentX,w.currentY,o.a),onMove:w=>a(w.currentX,w.currentY,o.b),onEnd:()=>{C(!0),(0,o.h)(),r=void 0}})}},2225:(O,P,l)=>{l.d(P,{g:()=>h});const h=(e,c,r,a,_)=>t(e[1],c[1],r[1],a[1],_).map(C=>o(e[0],c[0],r[0],a[0],C)),o=(e,c,r,a,_)=>_*(3*c*Math.pow(_-1,2)+_*(-3*r*_+3*r+a*_))-e*Math.pow(_-1,3),t=(e,c,r,a,_)=>u((a-=_)-3*(r-=_)+3*(c-=_)-(e-=_),3*r-6*c+3*e,3*c-3*e,e).filter(w=>w>=0&&w<=1),u=(e,c,r,a)=>{if(0===e)return((e,c,r)=>{const a=c*c-4*e*r;return a<0?[]:[(-c+Math.sqrt(a))/(2*e),(-c-Math.sqrt(a))/(2*e)]})(c,r,a);const _=(3*(r/=e)-(c/=e)*c)/3,C=(2*c*c*c-9*c*r+27*(a/=e))/27;if(0===_)return[Math.pow(-C,1/3)];if(0===C)return[Math.sqrt(-_),-Math.sqrt(-_)];const w=Math.pow(C/2,2)+Math.pow(_/3,3);if(0===w)return[Math.pow(C/2,.5)-c/3];if(w>0)return[Math.pow(-C/2+Math.sqrt(w),1/3)-Math.pow(C/2+Math.sqrt(w),1/3)-c/3];const x=Math.sqrt(Math.pow(-_/3,3)),m=Math.acos(-C/(2*Math.sqrt(Math.pow(-_/3,3)))),v=2*Math.pow(x,1/3);return[v*Math.cos(m/3)-c/3,v*Math.cos((m+2*Math.PI)/3)-c/3,v*Math.cos((m+4*Math.PI)/3)-c/3]}},5062:(O,P,l)=>{l.d(P,{i:()=>h});const h=o=>o&&""!==o.dir?"rtl"===o.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},6602:(O,P,l)=>{l.r(P),l.d(P,{startFocusVisible:()=>n});const h="ion-focused",t=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],n=u=>{let e=[],c=!0;const r=u?u.shadowRoot:document,a=u||document.body,_=g=>{e.forEach(i=>i.classList.remove(h)),g.forEach(i=>i.classList.add(h)),e=g},C=()=>{c=!1,_([])},w=g=>{c=t.includes(g.key),c||_([])},x=g=>{if(c&&void 0!==g.composedPath){const i=g.composedPath().filter(d=>!!d.classList&&d.classList.contains("ion-focusable"));_(i)}},m=()=>{r.activeElement===a&&_([])};return r.addEventListener("keydown",w),r.addEventListener("focusin",x),r.addEventListener("focusout",m),r.addEventListener("touchstart",C),r.addEventListener("mousedown",C),{destroy:()=>{r.removeEventListener("keydown",w),r.removeEventListener("focusin",x),r.removeEventListener("focusout",m),r.removeEventListener("touchstart",C),r.removeEventListener("mousedown",C)},setFocus:_}}},6555:(O,P,l)=>{l.d(P,{c:()=>o});var h=l(6655);const o=e=>{const c=e;let r;return{hasLegacyControl:()=>{if(void 0===r){const _=void 0!==c.label||t(c),C=c.hasAttribute("aria-label")||c.hasAttribute("aria-labelledby")&&null===c.shadowRoot,w=(0,h.h)(c);r=!0===c.legacy||!_&&!C&&null!==w}return r}}},t=e=>null!==e.shadowRoot&&!!(n.includes(e.tagName)&&null!==e.querySelector('[slot="label"]')||u.includes(e.tagName)&&""!==e.textContent),n=["ION-RANGE"],u=["ION-TOGGLE","ION-CHECKBOX","ION-RADIO"]},7864:(O,P,l)=>{l.d(P,{a:()=>n,b:()=>u,c:()=>t,d:()=>c,h:()=>e});const h={getEngine(){var r;const a=window;return a.TapticEngine||(null===(r=a.Capacitor)||void 0===r?void 0:r.isPluginAvailable("Haptics"))&&a.Capacitor.Plugins.Haptics},available(){var r;const a=window;return!!this.getEngine()&&("web"!==(null===(r=a.Capacitor)||void 0===r?void 0:r.getPlatform())||typeof navigator<"u"&&void 0!==navigator.vibrate)},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(r){const a=this.getEngine();if(!a)return;const _=this.isCapacitor()?r.style.toUpperCase():r.style;a.impact({style:_})},notification(r){const a=this.getEngine();if(!a)return;const _=this.isCapacitor()?r.style.toUpperCase():r.style;a.notification({style:_})},selection(){this.impact({style:"light"})},selectionStart(){const r=this.getEngine();r&&(this.isCapacitor()?r.selectionStart():r.gestureSelectionStart())},selectionChanged(){const r=this.getEngine();r&&(this.isCapacitor()?r.selectionChanged():r.gestureSelectionChanged())},selectionEnd(){const r=this.getEngine();r&&(this.isCapacitor()?r.selectionEnd():r.gestureSelectionEnd())}},o=()=>h.available(),t=()=>{o()&&h.selection()},n=()=>{o()&&h.selectionStart()},u=()=>{o()&&h.selectionChanged()},e=()=>{o()&&h.selectionEnd()},c=r=>{o()&&h.impact(r)}},7366:(O,P,l)=>{l.d(P,{a:()=>h,b:()=>x,c:()=>c,d:()=>m,e:()=>M,f:()=>e,g:()=>v,h:()=>t,i:()=>o,j:()=>E,k:()=>p,l:()=>r,m:()=>C,n:()=>g,o:()=>_,p:()=>u,q:()=>n,r:()=>s,s:()=>f,t:()=>w,u:()=>i,v:()=>d,w:()=>a});const h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M368 64L144 256l224 192V64z'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 144l192 224 192-224H64z'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 368L256 144 64 368h384z'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M416 128L192 384l-96-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M136 208l120-104 120 104M136 304l120 104 120-104' stroke-width='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none'/></svg>",_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",C="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",x="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='192' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",g="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",s="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",E="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",M="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"},4862:(O,P,l)=>{l.d(P,{I:()=>e,a:()=>_,b:()=>u,c:()=>x,d:()=>v,f:()=>C,g:()=>a,i:()=>r,p:()=>m,r:()=>g,s:()=>w});var h=l(5861),o=l(6655),t=l(1178);const u="ion-content",e=".ion-content-scroll-host",c=`${u}, ${e}`,r=i=>"ION-CONTENT"===i.tagName,a=function(){var i=(0,h.Z)(function*(d){return r(d)?(yield new Promise(s=>(0,o.c)(d,s)),d.getScrollElement()):d});return function(s){return i.apply(this,arguments)}}(),_=i=>i.querySelector(e)||i.querySelector(c),C=i=>i.closest(c),w=(i,d)=>r(i)?i.scrollToTop(d):Promise.resolve(i.scrollTo({top:0,left:0,behavior:d>0?"smooth":"auto"})),x=(i,d,s,E)=>r(i)?i.scrollByPoint(d,s,E):Promise.resolve(i.scrollBy({top:s,left:d,behavior:E>0?"smooth":"auto"})),m=i=>(0,t.b)(i,u),v=i=>{if(r(i)){const s=i.scrollY;return i.scrollY=!1,s}return i.style.setProperty("overflow","hidden"),!0},g=(i,d)=>{r(i)?i.scrollY=d:i.style.removeProperty("overflow")}},9240:(O,P,l)=>{l.d(P,{g:()=>o});var h=l(1178);const o=(n,u,e)=>{const c=null==n?0:n.toString().length,r=t(c,u);if(void 0===e)return r;try{return e(c,u)}catch(a){return(0,h.a)("Exception in provided `counterFormatter`.",a),r}},t=(n,u)=>`${n} / ${u}`},5234:(O,P,l)=>{l.r(P),l.d(P,{KEYBOARD_DID_CLOSE:()=>o,KEYBOARD_DID_OPEN:()=>h,copyVisualViewport:()=>d,keyboardDidClose:()=>m,keyboardDidOpen:()=>w,keyboardDidResize:()=>x,resetKeyboardAssist:()=>c,setKeyboardClose:()=>C,setKeyboardOpen:()=>_,startKeyboardAssist:()=>r,trackViewportChanges:()=>i});const h="ionKeyboardDidShow",o="ionKeyboardDidHide";let n={},u={},e=!1;const c=()=>{n={},u={},e=!1},r=s=>{a(s),s.visualViewport&&(u=d(s.visualViewport),s.visualViewport.onresize=()=>{i(s),w()||x(s)?_(s):m(s)&&C(s)})},a=s=>{s.addEventListener("keyboardDidShow",E=>_(s,E)),s.addEventListener("keyboardDidHide",()=>C(s))},_=(s,E)=>{v(s,E),e=!0},C=s=>{g(s),e=!1},w=()=>!e&&n.width===u.width&&(n.height-u.height)*u.scale>150,x=s=>e&&!m(s),m=s=>e&&u.height===s.innerHeight,v=(s,E)=>{const f=new CustomEvent(h,{detail:{keyboardHeight:E?E.keyboardHeight:s.innerHeight-u.height}});s.dispatchEvent(f)},g=s=>{const E=new CustomEvent(o);s.dispatchEvent(E)},i=s=>{n=Object.assign({},u),u=d(s.visualViewport)},d=s=>({width:Math.round(s.width),height:Math.round(s.height),offsetTop:s.offsetTop,offsetLeft:s.offsetLeft,pageTop:s.pageTop,pageLeft:s.pageLeft,scale:s.scale})},8034:(O,P,l)=>{l.d(P,{K:()=>t,a:()=>n,c:()=>c});var h=l(5861),o=l(4110),t=(()=>{return(r=t||(t={})).Body="body",r.Ionic="ionic",r.Native="native",r.None="none",t;var r})();const n={getEngine(){var r;return(null===(r=null==o.w?void 0:o.w.Capacitor)||void 0===r?void 0:r.isPluginAvailable("Keyboard"))&&(null==o.w?void 0:o.w.Capacitor.Plugins.Keyboard)},getResizeMode(){const r=this.getEngine();return null!=r&&r.getResizeMode?r.getResizeMode().catch(a=>{if("UNIMPLEMENTED"!==a.code)throw a}):Promise.resolve(void 0)}},u=r=>{if(void 0===o.d||r===t.None||void 0===r)return null;const a=o.d.querySelector("ion-app");return null!=a?a:o.d.body},e=r=>{const a=u(r);return null===a?0:a.clientHeight},c=function(){var r=(0,h.Z)(function*(a){let _,C,w,x;const m=function(){var s=(0,h.Z)(function*(){const E=yield n.getResizeMode(),p=void 0===E?void 0:E.mode;_=()=>{void 0===x&&(x=e(p)),w=!0,v(w,p)},C=()=>{w=!1,v(w,p)},null==o.w||o.w.addEventListener("keyboardWillShow",_),null==o.w||o.w.addEventListener("keyboardWillHide",C)});return function(){return s.apply(this,arguments)}}(),v=(s,E)=>{a&&a(s,g(E))},g=s=>{if(0===x||x===e(s))return;const E=u(s);return null!==E?new Promise(p=>{const M=new ResizeObserver(()=>{E.clientHeight===x&&(M.disconnect(),p())});M.observe(E)}):void 0};return yield m(),{init:m,destroy:()=>{null==o.w||o.w.removeEventListener("keyboardWillShow",_),null==o.w||o.w.removeEventListener("keyboardWillHide",C),_=C=void 0},isKeyboardVisible:()=>w}});return function(_){return r.apply(this,arguments)}}()},6690:(O,P,l)=>{l.d(P,{S:()=>o});const o={bubbles:{dur:1e3,circles:9,fn:(t,n,u)=>{const e=t*n/u-t+"ms",c=2*Math.PI*n/u;return{r:5,style:{top:32*Math.sin(c)+"%",left:32*Math.cos(c)+"%","animation-delay":e}}}},circles:{dur:1e3,circles:8,fn:(t,n,u)=>{const e=n/u,c=t*e-t+"ms",r=2*Math.PI*e;return{r:5,style:{top:32*Math.sin(r)+"%",left:32*Math.cos(r)+"%","animation-delay":c}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,n)=>({r:6,style:{left:32-32*n+"%","animation-delay":-110*n+"ms"}})},lines:{dur:1e3,lines:8,fn:(t,n,u)=>({y1:14,y2:26,style:{transform:`rotate(${360/u*n+(n<u/2?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(t,n,u)=>({y1:12,y2:20,style:{transform:`rotate(${360/u*n+(n<u/2?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(t,n,u)=>({y1:17,y2:29,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(t,n,u)=>({y1:12,y2:20,style:{transform:`rotate(${30*n+(n<6?180:-180)}deg)`,"animation-delay":t*n/u-t+"ms"}})}}},4805:(O,P,l)=>{l.r(P),l.d(P,{createSwipeBackGesture:()=>u});var h=l(6655),o=l(5062),t=l(1898);l(4349);const u=(e,c,r,a,_)=>{const C=e.ownerDocument.defaultView;let w=(0,o.i)(e);const m=s=>w?-s.deltaX:s.deltaX;return(0,t.createGesture)({el:e,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:s=>(w=(0,o.i)(e),(s=>{const{startX:p}=s;return w?p>=C.innerWidth-50:p<=50})(s)&&c()),onStart:r,onMove:s=>{const p=m(s)/C.innerWidth;a(p)},onEnd:s=>{const E=m(s),p=C.innerWidth,f=E/p,M=(s=>w?-s.velocityX:s.velocityX)(s),T=M>=0&&(M>.2||E>p/2),b=(T?1-f:f)*p;let I=0;if(b>5){const D=b/Math.abs(M);I=Math.min(D,540)}_(T,f<=0?.01:(0,h.l)(0,f,.9999),I)}})}},9448:(O,P,l)=>{l.d(P,{i:()=>C});var h=l(5861),o=l(433),t=l(4814),n=l(5439),e=l(4650),c=l(650),r=l(1468),a=l(7151),_=l(1481);let C=(()=>{class w{constructor(m,v,g,i,d,s,E,p){this.platform=m,this.navParams=v,this.aspoticServ=g,this.authService=i,this.modalController=d,this.formBuilder=s,this.sanitizer=E,this.toastController=p,(0,t.q)(window)}ngOnInit(){this.trackForm=this.formBuilder.group({name:["",o.kI.required],artist:["",o.kI.required],imageUrl:["",o.kI.required]}),this.getTrackData()}getTrackData(){this.aspoticServ.getTrackById(this.trackId).subscribe(m=>{this.trackForm.patchValue({name:m.name,artist:m.album.artists[0].name,imageUrl:m.album.images[0].url})},m=>{console.error("Error getting track data",m)})}showError(m){var v=this;return(0,h.Z)(function*(){(yield v.toastController.create({message:m,duration:3e3,color:"danger",mode:"ios",position:"bottom"})).present()})()}showSuccessMessage(m){var v=this;return(0,h.Z)(function*(){(yield v.toastController.create({message:m,duration:3e3,color:"success",mode:"ios",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(){if(this.trackForm.invalid)return;const m=this.trackId=this.navParams.get("trackId"),g=n(new Date).format("YYYY-MM-DD").toString(),i=this.authService.getUserIdFromToken();this.aspoticServ.editTrack(m,{_id:this.trackId,name:this.trackForm.value.name,album:{artists:[{id:"",name:this.trackForm.value.artist}],images:[{height:0,url:this.trackForm.value.imageUrl,width:0}],id:"",name:"",release_date:g,release_date_precision:"",total_tracks:0},duration_ms:0,comments:[],userId:i,spotifyId:"",preview_url:""}).subscribe(s=>{console.log("Track updated successfully",s),this.showSuccessMessage("Track updated successfully"),this.dismiss(),this.platform.ready().then(()=>{location.reload()})},s=>{console.error("Error updating track",s),this.showError("Error updating track"),this.dismiss()})}}return w.\u0275fac=function(m){return new(m||w)(e.Y36(c.t4),e.Y36(c.X1),e.Y36(r.z),e.Y36(a.e),e.Y36(c.IN),e.Y36(o.qu),e.Y36(_.H7),e.Y36(c.yF))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-edit-track"]],decls:23,vars:3,consts:[[3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup","ngSubmit"],["position","stacked"],["formControlName","name"],["formControlName","artist"],["formControlName","imageUrl"],["type","submit","expand","block",3,"disabled"]],template:function(m,v){1&m&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Edit track"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return v.dismiss()}),e._UZ(6,"ion-icon",3),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"form",4),e.NdJ("ngSubmit",function(){return v.onSubmit()}),e.TgZ(9,"ion-item")(10,"ion-label",5),e._uU(11,"Nombre canci\xf3n"),e.qZA(),e._UZ(12,"ion-input",6),e.qZA(),e.TgZ(13,"ion-item")(14,"ion-label",5),e._uU(15,"Artista"),e.qZA(),e._UZ(16,"ion-input",7),e.qZA(),e.TgZ(17,"ion-item")(18,"ion-label",5),e._uU(19,"Imagen actual"),e.qZA(),e._UZ(20,"ion-input",8),e.qZA(),e.TgZ(21,"ion-button",9),e._uU(22,"Guardar cambios"),e.qZA()()()),2&m&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("formGroup",v.trackForm),e.xp6(13),e.Q6J("disabled",v.trackForm.invalid))},dependencies:[o._Y,o.JJ,o.JL,c.YG,c.Sm,c.W2,c.Gu,c.gu,c.pK,c.Ie,c.Q$,c.wd,c.sr,c.j9,o.sg,o.u]}),w})()},4762:(O,P,l)=>{l.d(P,{Z:()=>e});var h=l(4650),o=l(1468),t=l(7151),n=l(1194),u=l(650);let e=(()=>{class c{constructor(a,_,C){this.aspoticServ=a,this.authService=_,this.router=C}onSignOutClick(){const a=this.authService.getUserIdFromToken();this.authService.signOut(a).subscribe(()=>{localStorage.removeItem("token"),this.router.navigate(["/home"])})}}return c.\u0275fac=function(a){return new(a||c)(h.Y36(o.z),h.Y36(t.e),h.Y36(n.F0))},c.\u0275cmp=h.Xpm({type:c,selectors:[["app-explore-container"]],decls:6,vars:0,consts:[[1,"ion-no-border"],[1,"custom-title"],["slot","end",1,"custom-btn","add-margin-right",3,"click"]],template:function(a,_){1&a&&(h.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),h._uU(3,"ASPOTIC"),h.qZA(),h.TgZ(4,"ion-button",2),h.NdJ("click",function(){return _.onSignOutClick()}),h._uU(5," SignOut "),h.qZA()()())},dependencies:[u.YG,u.Gu,u.wd,u.sr],styles:[".custom-title[_ngcontent-%COMP%]{color:#858bff}.cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center;margin-bottom:20px}ion-card[_ngcontent-%COMP%]{width:150px;height:140px;margin:50px;position:relative}ion-card[_ngcontent-%COMP%]:hover   .overlayer[_ngcontent-%COMP%]{visibility:visible}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:30px;text-align:center;justify-content:center;margin-top:180px}ion-card-title[_ngcontent-%COMP%]{font-size:medium;color:#fff;text-align:center;justify-content:center}ion-card-subtitle[_ngcontent-%COMP%]{font-size:small;color:#ccc;text-align:center;justify-content:center}ion-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{top:-175px;color:#fff;position:relative;font-size:13px;text-decoration:none}ion-fab[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px}ion-fab-button[_ngcontent-%COMP%]{font-size:16px}ion-icon[_ngcontent-%COMP%]{text-align:center}.center-btn[_ngcontent-%COMP%]{margin-right:15px}img[_ngcontent-%COMP%]{border-radius:5%}ion-icon[_ngcontent-%COMP%]{color:#fff}.custom-btn[_ngcontent-%COMP%], .custom-btn-add[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;text-transform:capitalize;margin-top:15px;margin-bottom:15px}.add-margin-right[_ngcontent-%COMP%]{margin-right:15px}@media only screen and (max-width: 600px){.search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.custom-btn[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}}@media only screen and (min-width: 601px){.search-container[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.custom-btn[_ngcontent-%COMP%]{margin-right:15px}}"]}),c})()},581:(O,P,l)=>{l.d(P,{e:()=>u});var h=l(6895),o=l(433),t=l(650),n=l(4650);let u=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[h.ez,o.u5,t.Pc]}),e})()},8449:(O,P,l)=>{l.d(P,{X:()=>x});var h=l(5861),o=l(433),t=l(4650),n=l(7151),u=l(1194),e=l(650),c=l(6895);function r(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function a(m,v){if(1&m&&(t.ynx(0),t.YNc(1,r,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,i=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==i.formValidation||null==(d=i.formValidation.get("username"))?null:d.hasError(g.type))&&((null==(d=i.formValidation.get("username"))?null:d.dirty)||(null==(d=i.formValidation.get("username"))?null:d.touched)))}}function _(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function C(m,v){if(1&m&&(t.ynx(0),t.YNc(1,_,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,i=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==(d=i.formValidation.get("password"))?null:d.hasError(g.type))&&((null==(d=i.formValidation.get("password"))?null:d.dirty)||(null==(d=i.formValidation.get("password"))?null:d.touched)))}}function w(m,v){if(1&m){const g=t.EpF();t.TgZ(0,"ion-content")(1,"div",5)(2,"form",6),t.NdJ("ngSubmit",function(){t.CHM(g);const d=t.oxw();return t.KtG(d.tryLogin(d.formValidation.value))}),t.TgZ(3,"ion-item",7)(4,"ion-label",8),t._uU(5,"Email"),t.qZA(),t._UZ(6,"ion-input",9),t.qZA(),t.TgZ(7,"div"),t.YNc(8,a,2,1,"ng-container",10),t.qZA(),t.TgZ(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Password"),t.qZA(),t._UZ(12,"ion-input",11),t.qZA(),t.TgZ(13,"div"),t.YNc(14,C,2,1,"ng-container",10),t.qZA(),t.TgZ(15,"div",12)(16,"ion-button",13),t._uU(17,"Sign In"),t.qZA()()()()()}if(2&m){const g=t.oxw();t.xp6(2),t.Q6J("formGroup",g.formValidation),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.username),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.password),t.xp6(2),t.Q6J("disabled",!g.formValidation.valid)}}let x=(()=>{class m{constructor(g,i,d,s,E){this.authService=g,this.router=i,this.formBuilder=d,this.modalController=s,this.toastController=E,this.formValidationMessages={username:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]},this.formValidation=this.formBuilder.group({username:["",o.kI.compose([o.kI.required,o.kI.email])],password:["",o.kI.compose([o.kI.required,o.kI.minLength(6)])]})}ngOnInit(){this.formValidation=this.formBuilder.group({username:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new o.NI("",o.kI.compose([o.kI.minLength(6),o.kI.required]))})}dismiss(){this.modalController.dismiss()}showError(g){var i=this;return(0,h.Z)(function*(){(yield i.toastController.create({message:g,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(g){var i=this;return(0,h.Z)(function*(){(yield i.toastController.create({message:g,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}tryLogin(g){this.authService.login(g).subscribe(i=>{console.log("Successful login")},i=>{console.error("Failed to sign in",i)}),this.authService.doLogin(g).then(i=>{this.showSuccessMessage("Successful login"),this.dismiss(),this.router.navigate(["/tabs"])},i=>{"auth/user-not-found"==i.code&&this.showError("There is no user record that corresponds to the email entered"),"auth/wrong-password"==i.code&&this.showError("The password entered is not correct"),console.log(i)})}}return m.\u0275fac=function(g){return new(g||m)(t.Y36(n.e),t.Y36(u.F0),t.Y36(o.qu),t.Y36(e.IN),t.Y36(e.yF))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[4,"ngIf"],["id","container"],[1,"form",3,"formGroup","ngSubmit"],["id","item","fill","outline"],["position","floating"],["type","text","formControlName","username"],[4,"ngFor","ngForOf"],["type","password","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(g,i){1&g&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sing In"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return i.dismiss()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.YNc(7,w,18,4,"ion-content",4)),2&g&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",i.formValidation))},dependencies:[c.sg,c.O5,o._Y,o.JJ,o.JL,e.YG,e.Sm,e.W2,e.Gu,e.gu,e.pK,e.Ie,e.Q$,e.wd,e.sr,e.j9,o.sg,o.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px;width:100%;padding:20px}.label-title[_ngcontent-%COMP%]{font-size:x-large;font-weight:500;color:#000;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:20px}ion-button[_ngcontent-%COMP%]{width:100%;margin:10px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:small;margin-bottom:10px;margin-right:10px;margin-left:10px}.error-alert[_ngcontent-%COMP%]{color:#f08383;background-color:#f08383;border-radius:20px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}"]}),m})()},8391:(O,P,l)=>{l.d(P,{V:()=>x});var h=l(5861),o=l(433),t=l(4650),n=l(7151),u=l(1194),e=l(650),c=l(6895);function r(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function a(m,v){if(1&m&&(t.ynx(0),t.YNc(1,r,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,i=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==i.formValidation||null==(d=i.formValidation.get("username"))?null:d.hasError(g.type))&&((null==(d=i.formValidation.get("username"))?null:d.dirty)||(null==(d=i.formValidation.get("username"))?null:d.touched)))}}function _(m,v){if(1&m&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&m){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.message," ")}}function C(m,v){if(1&m&&(t.ynx(0),t.YNc(1,_,2,1,"div",14),t.BQk()),2&m){const g=v.$implicit,i=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",(null==(d=i.formValidation.get("password"))?null:d.hasError(g.type))&&((null==(d=i.formValidation.get("password"))?null:d.dirty)||(null==(d=i.formValidation.get("password"))?null:d.touched)))}}function w(m,v){if(1&m){const g=t.EpF();t.TgZ(0,"ion-content")(1,"div",5)(2,"form",6),t.NdJ("ngSubmit",function(){t.CHM(g);const d=t.oxw();return t.KtG(d.trySignUp(d.formValidation.value))}),t.TgZ(3,"ion-item",7)(4,"ion-label",8),t._uU(5,"Email"),t.qZA(),t._UZ(6,"ion-input",9),t.qZA(),t.TgZ(7,"div"),t.YNc(8,a,2,1,"ng-container",10),t.qZA(),t.TgZ(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Password"),t.qZA(),t._UZ(12,"ion-input",11),t.qZA(),t.TgZ(13,"div"),t.YNc(14,C,2,1,"ng-container",10),t.qZA(),t.TgZ(15,"div",12)(16,"ion-button",13),t._uU(17,"Sign Up"),t.qZA()()()()()}if(2&m){const g=t.oxw();t.xp6(2),t.Q6J("formGroup",g.formValidation),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.username),t.xp6(6),t.Q6J("ngForOf",g.formValidationMessages.password),t.xp6(2),t.Q6J("disabled",!g.formValidation.valid)}}let x=(()=>{class m{constructor(g,i,d,s,E){this.authService=g,this.formBuilder=i,this.router=d,this.toastController=s,this.modalController=E,this.errorMessage="",this.formValidationMessages={username:[{type:"required",message:"El email es un campo obligatorio."},{type:"pattern",message:"El formato del email no es correcto."}],password:[{type:"required",message:"La contrase\xf1a es un campo obligatorio."},{type:"minlength",message:"La l\xf3ngitud m\xednima de una contrase\xf1a es 6 caracteres."}]}}ngOnInit(){this.formValidation=this.formBuilder.group({username:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new o.NI("",o.kI.compose([o.kI.minLength(6),o.kI.required]))})}showError(g){var i=this;return(0,h.Z)(function*(){(yield i.toastController.create({message:g,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(g){var i=this;return(0,h.Z)(function*(){(yield i.toastController.create({message:g,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}trySignUp(g){this.authService.signup(g).subscribe(i=>{console.log("Successful sign up")},i=>{console.error("Failed to sign up",i)}),this.authService.createUser(g).then(i=>{console.log("Successful sign up"),this.showSuccessMessage("Successful sign up, now you can sing in"),this.dismiss(),this.router.navigate(["/home"])},i=>{"auth/email-already-in-use"==i.code&&this.showError("User already exists"),"auth/invalid-email"==i.code&&this.showError("The email format is incorrect"),console.log(i)})}}return m.\u0275fac=function(g){return new(g||m)(t.Y36(n.e),t.Y36(o.qu),t.Y36(u.F0),t.Y36(e.yF),t.Y36(e.IN))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-signup"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[4,"ngIf"],["id","container"],[1,"form",3,"formGroup","ngSubmit"],["id","item","fill","outline"],["position","floating"],["type","text","formControlName","username"],[4,"ngFor","ngForOf"],["type","password","formControlName","password"],[1,"div-button-login"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(g,i){1&g&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sign Up"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return i.dismiss()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.YNc(7,w,18,4,"ion-content",4)),2&g&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",i.formValidation))},dependencies:[c.sg,c.O5,o._Y,o.JJ,o.JL,e.YG,e.Sm,e.W2,e.Gu,e.gu,e.pK,e.Ie,e.Q$,e.wd,e.sr,e.j9,o.sg,o.u],styles:[".form[_ngcontent-%COMP%]{margin-top:50px;width:100%;padding:20px}.label-title[_ngcontent-%COMP%]{font-size:x-large;font-weight:500;color:#000;margin-bottom:20px}.div-button-login[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-right:20px}ion-button[_ngcontent-%COMP%]{width:100%;margin:10px}.div-label-error[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:small;margin-bottom:10px;margin-right:10px;margin-left:10px}.error-alert[_ngcontent-%COMP%]{color:#f08383;background-color:#f08383;border-radius:20px}#items[_ngcontent-%COMP%]{display:inline-block;width:55vh;justify-content:center;align-content:center;align-items:center}#item[_ngcontent-%COMP%]{margin:10px}"]}),m})()},4133:(O,P,l)=>{l.d(P,{R:()=>d});var h=l(5861),o=l(433),t=l(6090),n=l(4650),u=l(650),e=l(1468),c=l(7151),r=l(6895);function a(s,E){if(1&s&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&s){const p=n.oxw().$implicit;n.xp6(1),n.hij(" ",p.message," ")}}function _(s,E){if(1&s&&(n.ynx(0),n.YNc(1,a,2,1,"div",13),n.BQk()),2&s){const p=E.$implicit,f=n.oxw(2);let M;n.xp6(1),n.Q6J("ngIf",(null==f.formValidation||null==(M=f.formValidation.get("author"))?null:M.hasError(p.type))&&((null==(M=f.formValidation.get("author"))?null:M.dirty)||(null==(M=f.formValidation.get("author"))?null:M.touched)))}}function C(s,E){if(1&s&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&s){const p=n.oxw().$implicit;n.xp6(1),n.hij(" ",p.message," ")}}function w(s,E){if(1&s&&(n.ynx(0),n.YNc(1,C,2,1,"div",13),n.BQk()),2&s){const p=E.$implicit,f=n.oxw(2);let M;n.xp6(1),n.Q6J("ngIf",(null==f.formValidation||null==(M=f.formValidation.get("comment"))?null:M.hasError(p.type))&&((null==(M=f.formValidation.get("comment"))?null:M.dirty)||(null==(M=f.formValidation.get("comment"))?null:M.touched)))}}function x(s,E){if(1&s&&(n.TgZ(0,"ion-select-option"),n._uU(1),n.qZA()),2&s){const p=E.$implicit;n.xp6(1),n.Oqu(p)}}function m(s,E){if(1&s&&(n.TgZ(0,"div",14),n._uU(1),n.qZA()),2&s){const p=n.oxw().$implicit;n.xp6(1),n.hij(" ",p.message," ")}}function v(s,E){if(1&s&&(n.ynx(0),n.YNc(1,m,2,1,"div",13),n.BQk()),2&s){const p=E.$implicit,f=n.oxw(2);let M;n.xp6(1),n.Q6J("ngIf",(null==f.formValidation||null==(M=f.formValidation.get("rating"))?null:M.hasError(p.type))&&((null==(M=f.formValidation.get("rating"))?null:M.dirty)||(null==(M=f.formValidation.get("rating"))?null:M.touched)))}}const g=function(){return[0,1,2,3,4,5]};function i(s,E){if(1&s){const p=n.EpF();n.TgZ(0,"ion-content",5)(1,"form",6),n.NdJ("ngSubmit",function(){n.CHM(p);const M=n.oxw();return n.KtG(M.onSubmit(M.formValidation.value))}),n.TgZ(2,"ion-list")(3,"ion-item")(4,"ion-label"),n._uU(5,"Author"),n.qZA(),n.TgZ(6,"ion-input",7),n.NdJ("ngModelChange",function(M){n.CHM(p);const y=n.oxw();return n.KtG(y.newComment.author=M)}),n.qZA()(),n.TgZ(7,"div"),n.YNc(8,_,2,1,"ng-container",8),n.qZA(),n.TgZ(9,"ion-item")(10,"ion-label"),n._uU(11,"Comment"),n.qZA(),n.TgZ(12,"ion-textarea",9),n.NdJ("ngModelChange",function(M){n.CHM(p);const y=n.oxw();return n.KtG(y.newComment.comment=M)}),n.qZA()(),n.TgZ(13,"div"),n.YNc(14,w,2,1,"ng-container",8),n.qZA(),n.TgZ(15,"ion-item")(16,"ion-label"),n._uU(17,"Select rating"),n.qZA(),n.TgZ(18,"ion-select",10),n.NdJ("ngModelChange",function(M){n.CHM(p);const y=n.oxw();return n.KtG(y.newComment.rating=M)}),n.YNc(19,x,2,1,"ion-select-option",8),n.qZA()(),n.TgZ(20,"div"),n.YNc(21,v,2,1,"ng-container",8),n.qZA()(),n.TgZ(22,"div",11)(23,"ion-button",12),n._uU(24,"A\xf1adir comentario"),n.qZA()()()()}if(2&s){const p=n.oxw();n.Q6J("fullscreen",!0),n.xp6(1),n.Q6J("formGroup",p.formValidation),n.xp6(5),n.Q6J("ngModel",p.newComment.author),n.xp6(2),n.Q6J("ngForOf",p.formValidationMessages.author),n.xp6(4),n.Q6J("counter",!0)("ngModel",p.newComment.comment),n.xp6(2),n.Q6J("ngForOf",p.formValidationMessages.comment),n.xp6(4),n.Q6J("ngModel",p.newComment.rating),n.xp6(1),n.Q6J("ngForOf",n.DdM(11,g)),n.xp6(2),n.Q6J("ngForOf",p.formValidationMessages.rating),n.xp6(2),n.Q6J("disabled",!p.formValidation.valid)}}let d=(()=>{class s{constructor(p,f,M,y,T,A,b){this.platform=p,this.formBuilder=f,this.aspoticServ=M,this.authService=y,this.navParams=T,this.modalController=A,this.toastController=b,this.userId="",this.formValidationMessages={author:[{type:"required",message:"El autor es un campo obligatorio."}],comment:[{type:"required",message:"El comentario es un campo obligatorio."},{type:"maxlength",message:"La l\xf3ngitud m\xe1xima de un comentario es 1000 caracteres."}],rating:[{type:"required",message:"El rating es un campo obligatorio."}]},this.newComment={comment:"",rating:0,_id:"",author:"",createdOn:new Date,userId:""},this.formValidation=this.formBuilder.group({author:["",[o.kI.required]],comment:["",o.kI.compose([o.kI.required,o.kI.maxLength(1e3)])],rating:["",[o.kI.required]]})}ngOnInit(){this.formValidation=this.formBuilder.group({author:new o.NI("",o.kI.compose([o.kI.required])),comment:new o.NI("",o.kI.compose([o.kI.maxLength(1e3),o.kI.required])),rating:new o.NI("",o.kI.compose([o.kI.required]))}),this.userId&&this.authService.getUserIdFromToken()}showError(p){var f=this;return(0,h.Z)(function*(){(yield f.toastController.create({message:p,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(p){var f=this;return(0,h.Z)(function*(){(yield f.toastController.create({message:p,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(p){var f=this;return(0,h.Z)(function*(){try{const M=f.trackId=f.navParams.get("trackId"),y=f.newComment;f.newComment.userId=f.userId,f.newComment.createdOn=new Date;const T=yield t.b.getCurrentPosition(),b=T.coords.latitude,I=T.coords.accuracy;y.longitude=T.coords.longitude,y.latitude=b,y.accuracy=I,f.aspoticServ.addCommentToTrack(M,y).subscribe(D=>{console.log(D),f.newComment={comment:"",rating:0,_id:"",author:"",createdOn:new Date,userId:""}}),f.showSuccessMessage("Comment added successfully"),f.dismiss(),f.platform.ready().then(()=>{location.reload()})}catch(M){console.error(M),f.showError("There was a problem adding the comment"),f.dismiss()}})()}}return s.\u0275fac=function(p){return new(p||s)(n.Y36(u.t4),n.Y36(o.qu),n.Y36(e.z),n.Y36(c.e),n.Y36(u.X1),n.Y36(u.IN),n.Y36(u.yF))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-add-comment"]],decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],["slot","end"],[3,"click"],["name","close"],[3,"fullscreen",4,"ngIf"],[3,"fullscreen"],[1,"form",3,"formGroup","ngSubmit"],["type","text","formControlName","author",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","custom-input","type","text","label","Comment","labelPlacement","floating","maxlength","1000","formControlName","comment",3,"counter","ngModel","ngModelChange"],["formControlName","rating",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(p,f){1&p&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n._uU(3,"Add comment"),n.qZA(),n.TgZ(4,"ion-buttons",1)(5,"ion-button",2),n.NdJ("click",function(){return f.dismiss()}),n._UZ(6,"ion-icon",3),n.qZA()()()(),n.YNc(7,i,25,12,"ion-content",4)),2&p&&(n.Q6J("translucent",!0),n.xp6(7),n.Q6J("ngIf",f.formValidation))},dependencies:[r.sg,r.O5,o._Y,o.JJ,o.JL,o.nD,u.YG,u.Sm,u.W2,u.Gu,u.gu,u.pK,u.Ie,u.Q$,u.q_,u.t9,u.n0,u.g2,u.wd,u.sr,u.QI,u.j9,o.sg,o.u],styles:[".error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:5px}"]}),s})()},4244:(O,P,l)=>{l.d(P,{V:()=>m});var h=l(5861),o=l(433),t=l(6090),n=l(5439),u=l(4814),e=l(7423),c=l(76);const r=(0,e.fo)("Camera",{web:()=>l.e(3954).then(l.bind(l,3954)).then(v=>new v.CameraWeb)});var a=l(4650),_=l(650),C=l(1468),w=l(7151),x=l(1481);let m=(()=>{class v{constructor(i,d,s,E,p,f,M){this.platform=i,this.aspoticServ=d,this.authService=s,this.modalController=E,this.formBuilder=p,this.sanitizer=f,this.toastController=M,(0,u.q)(window)}ngOnInit(){this.trackForm=this.formBuilder.group({name:["",o.kI.required],artist:["",o.kI.required],imageUrl:["",o.kI.required]})}selectFromCamera(){r.getPhoto({quality:100,allowEditing:!1,resultType:c.dk.Base64,source:c.oK.Camera}).then(i=>{const d=new Image;d.src="data:image/jpeg;base64,"+i.base64String,d.onload=()=>{const s=document.createElement("canvas"),E=s.getContext("2d");s.width=640,s.height=640,null==E||E.drawImage(d,0,0,640,640),this.imageUrl=s.toDataURL("image/jpeg"),this.trackForm.patchValue({imageUrl:this.imageUrl})}},i=>{console.error("Error selecting image from camera",i)})}showError(i){var d=this;return(0,h.Z)(function*(){(yield d.toastController.create({message:i,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(i){var d=this;return(0,h.Z)(function*(){(yield d.toastController.create({message:i,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}onSubmit(){var i=this;return(0,h.Z)(function*(){try{const s=n(new Date).format("YYYY-MM-DD").toString(),E=i.authService.getUserIdFromToken(),p=i.trackForm.value,f={name:p.name,album:{artists:[{id:"",name:p.artist}],id:"",images:[{height:300,url:p.imageUrl,width:300}],name:"",release_date:s,release_date_precision:"",total_tracks:0},_id:"",duration_ms:0,comments:[],userId:E,spotifyId:"",preview_url:""},M=yield t.b.getCurrentPosition(),T=M.coords.latitude,A=M.coords.accuracy;f.longitude=M.coords.longitude,f.latitude=T,f.accuracy=A,console.log("New track:",f),i.aspoticServ.createTrack(f).subscribe(b=>{console.log(b),i.showSuccessMessage("Track created successfully"),i.dismiss(),i.platform.ready().then(()=>{location.reload()})},b=>{console.error(b),i.showError("There was an error creating the track"),i.dismiss()})}catch(d){console.error(d),i.showError("There was an error creating the track"),i.dismiss()}})()}}return v.\u0275fac=function(i){return new(i||v)(a.Y36(_.t4),a.Y36(C.z),a.Y36(w.e),a.Y36(_.IN),a.Y36(o.qu),a.Y36(x.H7),a.Y36(_.yF))},v.\u0275cmp=a.Xpm({type:v,selectors:[["app-add-track"]],decls:25,vars:2,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close"],[3,"formGroup","ngSubmit"],["position","stacked"],["formControlName","name"],["formControlName","artist"],["formControlName","imageUrl"],["expand","block",3,"click"],["type","submit","expand","block",3,"disabled"]],template:function(i,d){1&i&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),a._uU(3,"Add track"),a.qZA(),a.TgZ(4,"ion-buttons",1)(5,"ion-button",2),a.NdJ("click",function(){return d.dismiss()}),a._UZ(6,"ion-icon",3),a.qZA()()()(),a.TgZ(7,"ion-content")(8,"form",4),a.NdJ("ngSubmit",function(){return d.onSubmit()}),a.TgZ(9,"ion-item")(10,"ion-label",5),a._uU(11,"Track name"),a.qZA(),a._UZ(12,"ion-input",6),a.qZA(),a.TgZ(13,"ion-item")(14,"ion-label",5),a._uU(15,"Artist name"),a.qZA(),a._UZ(16,"ion-input",7),a.qZA(),a.TgZ(17,"ion-item")(18,"ion-label",5),a._uU(19,"Track image"),a.qZA(),a._UZ(20,"ion-input",8),a.qZA(),a.TgZ(21,"ion-button",9),a.NdJ("click",function(){return d.selectFromCamera()}),a._uU(22,"Seleccionar desde C\xe1mara"),a.qZA(),a.TgZ(23,"ion-button",10),a._uU(24,"Add track"),a.qZA()()()),2&i&&(a.xp6(8),a.Q6J("formGroup",d.trackForm),a.xp6(15),a.Q6J("disabled",d.trackForm.invalid))},dependencies:[o._Y,o.JJ,o.JL,_.YG,_.Sm,_.W2,_.Gu,_.gu,_.pK,_.Ie,_.Q$,_.wd,_.sr,_.j9,o.sg,o.u]}),v})()}}]);