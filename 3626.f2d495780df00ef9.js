"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3626],{3626:(J,g,c)=>{c.r(g),c.d(g,{TrackDetailsPageModule:()=>U});var d=c(6895),p=c(433),i=c(650),u=c(1194),l=c(5861),f=c(4133),_=c(9448),t=c(4650),h=c(1468),x=c(7151);function k(e,a){1&e&&t._UZ(0,"ion-back-button",9)}function T(e,a){1&e&&t._UZ(0,"ion-back-button",10)}function Z(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"ion-toolbar")(1,"ion-buttons",5),t.YNc(2,k,1,0,"ion-back-button",6),t.YNc(3,T,1,0,"ion-back-button",7),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA(),t.TgZ(6,"ion-button",8),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.openModal(r.trackId))}),t._uU(7," Add Comment "),t.qZA()()}if(2&e){const n=a.ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngIf",""!==o.userIdLogged),t.xp6(1),t.Q6J("ngIf",""===o.userIdLogged),t.xp6(2),t.hij(" ",n.name," ")}}function b(e,a){if(1&e&&(t.TgZ(0,"ion-card-subtitle"),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij("Artist: ",n.name," ")}}function C(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",18)(1,"ion-button",19),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.editTrackModal(r.trackId))}),t._uU(2,"Edit track"),t.qZA()()}}function y(e,a){if(1&e&&(t.TgZ(0,"ion-card"),t._UZ(1,"img",11),t.TgZ(2,"ion-grid")(3,"ion-row",12)(4,"ion-col",13)(5,"ion-card-content")(6,"ion-card-title"),t._uU(7),t.qZA(),t.TgZ(8,"ion-card-subtitle"),t._uU(9),t.qZA(),t.TgZ(10,"ion-card-subtitle"),t._uU(11),t.qZA(),t.YNc(12,b,2,1,"ion-card-subtitle",14),t.qZA(),t.TgZ(13,"audio",15),t._UZ(14,"source",16),t.qZA()()()(),t.YNc(15,C,3,0,"div",17),t.qZA()),2&e){const n=a.ngIf,o=t.oxw();t.xp6(1),t.s9C("src",n.album.images[0].url,t.LSH),t.xp6(6),t.Oqu(n.name),t.xp6(2),t.hij("Release date: ",n.album.release_date,""),t.xp6(2),t.hij("Album: ",n.album.name,""),t.xp6(1),t.Q6J("ngForOf",n.album.artists),t.xp6(2),t.Q6J("src",n.preview_url,t.LSH),t.xp6(1),t.Q6J("ngIf",""!==o.userIdLogged)}}function P(e,a){1&e&&(t.TgZ(0,"span",41),t._uU(1,"( "),t._UZ(2,"ion-icon",42),t._uU(3," Your comment) "),t.qZA())}function w(e,a){1&e&&t._UZ(0,"ion-icon",43)}function M(e,a){1&e&&t._UZ(0,"ion-icon",44)}function v(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"ion-card",20)(1,"ion-row")(2,"ion-col",21),t._UZ(3,"img",22),t.qZA(),t.TgZ(4,"ion-col")(5,"ion-card-content")(6,"ion-card-title",23),t._uU(7),t.TgZ(8,"span",24),t._uU(9),t.ALo(10,"date"),t.qZA(),t.YNc(11,P,4,0,"span",25),t.qZA(),t.TgZ(12,"div",26),t.YNc(13,w,1,0,"ion-icon",27),t.YNc(14,M,1,0,"ion-icon",28),t.qZA(),t.TgZ(15,"p",29),t._uU(16),t.qZA(),t.TgZ(17,"span",24),t._UZ(18,"ion-icon",30),t._uU(19),t.qZA(),t.TgZ(20,"div",31),t.NdJ("click",function(){const s=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.deleteComment(m.trackId,s._id))}),t.O4$(),t.TgZ(21,"svg",32),t._UZ(22,"g",33)(23,"g",34),t.TgZ(24,"g",35),t._UZ(25,"path",36)(26,"path",37)(27,"path",38)(28,"path",39)(29,"path",40),t.qZA()()()()()()()}if(2&e){const n=a.$implicit,o=t.oxw();t.xp6(7),t.hij("",n.author," "),t.xp6(2),t.Oqu(t.xi3(10,8,n.createdOn,"yyyy/MM/dd HH:mm")),t.xp6(2),t.Q6J("ngIf",n.userId===o.userIdLogged&&""!==o.userIdLogged),t.xp6(2),t.Q6J("ngForOf",o.getRatingArray(n.rating)),t.xp6(1),t.Q6J("ngForOf",o.getEmptyRatingArray(n.rating)),t.xp6(2),t.Oqu(n.comment),t.xp6(3),t.AsE(" ",n.latitude,", ",n.longitude,"")}}function O(e,a){1&e&&(t.ynx(0),t.TgZ(1,"div",45),t._UZ(2,"img",46),t.TgZ(3,"p",47),t._uU(4,"There is no comments yet..."),t.qZA()(),t.BQk())}const A=[{path:"",component:(()=>{class e{constructor(n,o,r,s,m,D,F,Y){this.platform=n,this.activateRoute=o,this.aspoticServ=r,this.modalController=s,this.authService=m,this.router=D,this.toastController=F,this.alertController=Y,this.userId=""}ngOnInit(){this.activateRoute.params.subscribe(n=>{const o=n._id;this.trackId=o,this.track=this.aspoticServ.getTrackById(o),console.log(this.track)}),this.userIdLogged=this.authService.getUserIdFromToken(),this.userId&&this.authService.getUserIdFromToken(),this.authorComment=this.authService.getUsernameFromToken()}showError(n){var o=this;return(0,l.Z)(function*(){(yield o.toastController.create({message:n,duration:3e3,color:"danger",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}showSuccessMessage(n){var o=this;return(0,l.Z)(function*(){(yield o.toastController.create({message:n,duration:3e3,color:"success",mode:"ios",cssClass:"custom-toast",position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}openModal(n){var o=this;return(0,l.Z)(function*(){return yield(yield o.modalController.create({component:f.R,componentProps:{trackId:n}})).present()})()}editTrackModal(n){var o=this;return(0,l.Z)(function*(){return yield(yield o.modalController.create({component:_.i,componentProps:{trackId:n}})).present()})()}getRatingArray(n){return Array(n)}getEmptyRatingArray(n){return Array(5-n)}deleteComment(n,o){var r=this;return(0,l.Z)(function*(){(yield r.warn())&&(r.aspoticServ.deleteComment(n,o).subscribe(()=>{console.log("Comment deleted successfully"),r.showSuccessMessage("Comment deleted successfully"),r.dismiss(),r.platform.ready().then(()=>{window.location.reload()})},m=>{console.error(m),r.showError("There was a problem adding the comment"),r.dismiss()}),location)})()}warn(){var n=this;return(0,l.Z)(function*(){return new Promise(function(){var o=(0,l.Z)(function*(r){yield(yield n.alertController.create({header:"Delete comment",message:"Are you sure that you want to delete this comment?",buttons:[{text:"Cancel",role:"cancel",handler:()=>r(!1)},{text:"Delete",handler:()=>r(!0)}]})).present()});return function(r){return o.apply(this,arguments)}}())})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(i.t4),t.Y36(u.gz),t.Y36(h.z),t.Y36(i.IN),t.Y36(x.e),t.Y36(u.F0),t.Y36(i.yF),t.Y36(i.Br))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-track-details"]],decls:14,vars:16,consts:[[3,"translucent"],[4,"ngIf"],[3,"fullscreen"],[1,"title-sections"],["class","comment-card",4,"ngFor","ngForOf"],["slot","start"],["defaultHref","/tabs/tab2",4,"ngIf"],["defaultHref","/home",4,"ngIf"],["slot","end",1,"custom-btn",3,"click"],["defaultHref","/tabs/tab2"],["defaultHref","/home"],[1,"float-child-left","col-size",3,"src"],[1,"float-child-right"],[1,"info-col"],[4,"ngFor","ngForOf"],["controls",""],["type","audio/mp3",3,"src"],["class","card-button",4,"ngIf"],[1,"card-button"],[1,"custom-btn",3,"click"],[1,"comment-card"],["size","auto"],["src","https://www.shareicon.net/data/2016/05/26/771188_man_512x512.png",1,"custom-img"],[1,"comment-author"],[1,"date","text-black-50"],["class","comment-user",4,"ngIf"],[1,"comment-rating"],["name","star","color","warning",4,"ngFor","ngForOf"],["name","star-outline","color","warning",4,"ngFor","ngForOf"],[1,"comment-text"],["name","location"],[1,"card-delete-button","ion-float-end",3,"click"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg","stroke","#f50000",1,"svg-icon"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M10 11V17","stroke","#fe5858","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 11V17","stroke","#fe5858","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 7H20","stroke","#fe5858","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M6 7H12H18V18C18 19.6569 16.6569 21 15 21H9C7.34315 21 6 19.6569 6 18V7Z","stroke","#fe5858","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z","stroke","#fe5858","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"comment-user"],["name","person"],["name","star","color","warning"],["name","star-outline","color","warning"],[1,"empty-comments"],["src","../../assets/icon/noComments1.png","alt","Empty Comments Illustration",1,"empty-image"],[1,"empty-text"]],template:function(n,o){if(1&n&&(t.TgZ(0,"ion-header",0),t.YNc(1,Z,8,3,"ion-toolbar",1),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"ion-content",2),t.YNc(4,y,16,7,"ion-card",1),t.ALo(5,"async"),t.TgZ(6,"ion-card-header")(7,"ion-label",3),t._uU(8,"Comments"),t.qZA()(),t.YNc(9,v,30,11,"ion-card",4),t.ALo(10,"async"),t.YNc(11,O,5,0,"ng-container",1),t.ALo(12,"async"),t.ALo(13,"async"),t.qZA()),2&n){let r,s;t.Q6J("translucent",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,6,o.track)),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngIf",t.lcZ(5,8,o.track)),t.xp6(5),t.Q6J("ngForOf",null==(r=t.lcZ(10,10,o.track))?null:r.comments),t.xp6(2),t.Q6J("ngIf",!(null!=(s=t.lcZ(12,12,o.track))&&s.comments)||0===(null==(s=t.lcZ(13,14,o.track))?null:s.comments.length))}},dependencies:[d.sg,d.O5,i.oU,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.wI,i.W2,i.jY,i.Gu,i.gu,i.Q$,i.Nd,i.wd,i.sr,i.cs,d.Ov,d.uU],styles:["ion-card[_ngcontent-%COMP%]{border-radius:20px;background:#ffffff}.custom-btn[_ngcontent-%COMP%]{--background: #858BFF;--color: white;--border-radius: 25px;margin-left:10px;text-transform:capitalize;display:flex;justify-content:flex-end;align-items:flex-end;margin-right:15px}.float-container[_ngcontent-%COMP%]{position:relative;width:100%}.float-child-right[_ngcontent-%COMP%]{float:left}.float-child-left[_ngcontent-%COMP%]{float:left;margin-right:10px}.info-col[_ngcontent-%COMP%]{display:table;flex-direction:column}.card-button[_ngcontent-%COMP%]{display:table;margin-top:auto}@media only screen and (max-width: 600px){.col-size[_ngcontent-%COMP%]{width:100%;border-radius:10px;max-width:-moz-fit-content!important;max-width:fit-content!important}.card-button[_ngcontent-%COMP%]{width:100%}.float-child-right[_ngcontent-%COMP%]{float:left}}@media only screen and (min-width: 601px){.col-size[_ngcontent-%COMP%]{height:205px;border-radius:10px;max-width:-moz-fit-content!important;max-width:fit-content!important}.card-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-end;margin-top:auto}}.date[_ngcontent-%COMP%]{font-size:12px;color:#a9a9a9;font-weight:400;padding-right:10px}.comment-user[_ngcontent-%COMP%]{display:inline-flex;font-size:12px;color:red;font-weight:400}.custom-img[_ngcontent-%COMP%]{width:45px!important;margin:10px!important;border-radius:200px!important}.comment-card[_ngcontent-%COMP%]{margin-bottom:10px}.comment-author[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:5px}.comment-rating[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.comment-text[_ngcontent-%COMP%]{margin-bottom:10px}svg[_ngcontent-%COMP%]{width:20px;height:20px}.card-delete-button[_ngcontent-%COMP%]{border:1px solid #ff0000;display:flex;padding:.3em;width:auto;cursor:pointer;border-radius:50px;transition:.3s ease-in-out}.card-delete-button[_ngcontent-%COMP%]:hover{border:1px solid #ffcaa6;background-color:#ffcaa6}.title-sections[_ngcontent-%COMP%]{font-size:large;color:#000;font-weight:700}.empty-comments[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.empty-image[_ngcontent-%COMP%]{width:25vH;height:auto}.empty-text[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}"]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(A),d.ez,u.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,p.u5,i.Pc,I]}),e})()}}]);